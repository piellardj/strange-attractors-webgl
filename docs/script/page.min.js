const Demopage=function(){const e=document.getElementById("error-messages");function n(n){return e.querySelector("span[id=error-message-"+n+"]")}return e||console.error("Cannot find element 'error-messages'."),Object.freeze({setErrorMessage:function(r,t){if(e){const o=n(r);if(o)return void(o.innerHTML=t);{const n=document.createElement("span");n.id="error-message-"+r,n.innerText=t,e.appendChild(n),e.appendChild(document.createElement("br"))}}},removeErrorMessage:function(r){if(e){const t=n(r);if(t){const n=t.nextElementSibling;n&&e.removeChild(n),e.removeChild(t)}}}})}();
const Canvas=function(){function e(e){const n=document.querySelector(e);return n||console.error("Cannot find element '"+e+"'."),n}function n(n){return e("input[type=checkbox][id="+n+"]")}const t=document.getElementById("canvas-container"),i=e("canvas[id="+"canvas"+"]");const c=document.getElementById("canvas-buttons-column"),o=n("fullscreen-checkbox-id"),s=t.querySelector(".loader");let l=512,u=512;function d(e){const n=Array.prototype.slice.call(arguments,1);for(let t=0;t<e.length;++t)e[t].apply(null,n)}function r(){const e=i.getBoundingClientRect();return[Math.floor(e.width),Math.floor(e.height)]}!function(){function e(e){document.body.style.overflow=e?"hidden":"auto"}const t=n("side-pane-checkbox-id");o&&(window.addEventListener("load",function(){e(o.checked),o.addEventListener("change",function(){e(o.checked)})},!1),t&&o.addEventListener("change",function(){o.checked&&(t.checked=!1)},!1))}();let a=[0,0];const f=[];function h(e){return e+"px"}function g(){t.style.width="100vw";const e=r();o.checked?(t.style.height="100%",t.style["max-width"]="",t.style["max-height"]=""):(e[1]=e[0]*u/l,t.style.height=h(e[1]),t.style["max-width"]=h(l),t.style["max-height"]=h(u)),e[0]===a[0]&&e[1]===a[1]||(a=r(),d(f,a[0],a[1]))}window.addEventListener("load",g,!1),o.addEventListener("change",g,!1),window.addEventListener("resize",g,!1);const v=[];let m=!1;const y=[g],w=[],E=[],p=[],L=[],k=[],b=[],Y=[];if(o&&o.addEventListener("change",function(){d(y,o.checked)},!1),document.addEventListener("keydown",function(e){27==e.keyCode&&Canvas.toggleFullscreen(!1)}),i){function C(e,n){const t=i.getBoundingClientRect();return[(e-t.left)/t.width,(n-t.top)/t.height]}function X(e,n){const t=C(e,n);v[0]=t[0],v[1]=t[1],m=!0,d(w)}function x(){m&&(m=!1,d(b))}function M(e,n){const t=C(e,n),i=t[0]-v[0],c=t[1]-v[1];v[0]=t[0],v[1]=t[1],m&&d(E,i,c),d(k,t[0],t[1])}i.addEventListener("mousedown",function(e){0===e.button&&X(e.clientX,e.clientY)},!1),i.addEventListener("mouseenter",function(){d(p)},!1),i.addEventListener("mouseleave",function(){d(L)},!1),i.addEventListener("wheel",function(e){if(Y.length>0){const n=e.deltaY>0?1:-1;return d(Y,n,v),e.preventDefault(),!1}return!0},!1),window.addEventListener("mousemove",function(e){M(e.clientX,e.clientY)}),window.addEventListener("mouseup",function(e){0===e.button&&x()});const e=[];let n=0;i.addEventListener("touchstart",function(t){const i=e.length,c=t.changedTouches;for(let n=0;n<c.length;++n){const t=c[n];let i=!1;for(let n=0;n<e.length;++n)if(t.identifier===e[n].id){i=!0;break}i||e.push({id:t.identifier,clientX:t.clientX,clientY:t.clientY})}if(0===i&&e.length>0){const n=e[0];X(n.clientX,n.clientY)}else if(2===e.length){const t=e[0],i=e[1],c=t.clientX-i.clientX,o=t.clientY-i.clientY;n=Math.sqrt(c*c+o*o)}},!1),window.addEventListener("touchend",function(n){const t=n.changedTouches;for(let n=0;n<t.length;++n){const i=t[n];for(let n=0;n<e.length;++n)i.identifier===e[n].id&&(e.splice(n,1),n--)}if(1===e.length){const n=C(e[0].clientX,e[0].clientY);v[0]=n[0],v[1]=n[1]}else 0===e.length&&x()}),window.addEventListener("touchmove",function(t){const i=t.changedTouches;for(let n=0;n<i.length;++n){const t=i[n];for(let n=0;n<e.length;++n)t.identifier===e[n].id&&(e[n].clientX=t.clientX,e[n].clientY=t.clientY)}if(m&&Y.length>0&&t.preventDefault(),1===e.length)M(e[0].clientX,e[0].clientY);else if(2===e.length){const t=e[0],i=e[1],c=t.clientX-i.clientX,o=t.clientY-i.clientY,s=Math.sqrt(c*c+o*o),l=(n-s)/n;n=s;const u=C(.5*(e[0].clientX+e[1].clientX),.5*(e[0].clientY+e[1].clientY));d(Y,5*l,u)}},{passive:!1})}const T={};return Object.freeze({Observers:Object.freeze({canvasResize:f,fullscreenToggle:y,mouseDown:w,mouseDrag:E,mouseEnter:p,mouseLeave:L,mouseMove:k,mouseWheel:Y,mouseUp:b}),getAspectRatio:function(){const e=r();return e[0]/e[1]},getCanvas:function(){return i},getCanvasContainer:function(){return t},getSize:r,getMousePosition:function(){return v.slice()},isFullScreen:function(){return o&&o.checked},isMouseDown:function(){return m},setIndicatorText:function(n,t){const i=function(n){if(!T[n]){const t=n+"-indicator-id";T[n]=e("#"+t+" span")}return T[n]}(n);i&&(i.innerText=t)},setIndicatorsVisibility:function(e){document.getElementById("indicators").style.display=e?"block":"none"},setMaxSize:function(e,n){l=e,u=n,g()},setResizable:function(e){c.style.display=e?"block":"none"},setLoaderText:function(e){s&&(s.querySelector("span").innerText=e)},showLoader:function(e){s&&(s.style.display=e?"block":"")},toggleFullscreen:function(e){if(o){if(e!=o.checked)if(o.checked=e,"function"==typeof window.CustomEvent)o.dispatchEvent(new CustomEvent("change"));else if("function"==typeof CustomEvent.prototype.initCustomEvent){const e=document.createEvent("CustomEvent");e.initCustomEvent("change",!1,!1,void 0),o.dispatchEvent(e)}}}})}();
const Controls=function(){return Object.freeze({setVisibility:function(n,o){const t=function(n){const o=document.querySelector(n);return o||console.error("Cannot find control '"+n+"'."),o}("div#control-"+n);t&&(t.style.display=o?"":"none")}})}();
const Picker=function(){const t={};function e(t){for(let e=0;e<t.inputs.length;++e)if(t.inputs[e].checked)return e;return-1}function n(t,e){e?t.classList.remove("disabled"):t.classList.contains("disabled")||t.classList.add("disabled")}function i(t,i){const s=e(t);let u,c=null;if(s>=0?(u=t.inputs[s].dataset.label,c=t.inputs[s].value):u=t.wrapper.dataset.placeholder||"",t.span.innerText=u,t.inputs.length<0?(n(t.leftButton,!1),n(t.rightButton,!1)):(n(t.leftButton,!t.inputs[0].checked),n(t.rightButton,!t.inputs[t.inputs.length-1].checked)),i)for(let e=0;e<t.observers.length;++e)t.observers[e](c)}function s(t){return!t.classList.contains("disabled")}function u(t){t.leftButton.addEventListener("click",function(){if(s(t.leftButton)){const n=e(t);n<0?t.inputs[t.inputs.length-1].checked=!0:n>0&&(t.inputs[n].checked=!1,t.inputs[n-1].checked=!0),i(t,!0)}}),t.rightButton.addEventListener("click",function(){if(s(t.rightButton)){const n=e(t);n<0?t.inputs[0].checked=!0:n<t.inputs.length-1&&(t.inputs[n].checked=!1,t.inputs[n+1].checked=!0),i(t,!0)}}),i(t,!0)}return function(){const e=document.querySelectorAll(".inline-picker");for(let n=0;n<e.length;++n){const i={wrapper:e[n],leftButton:e[n].querySelector(".picker-button.left"),rightButton:e[n].querySelector(".picker-button.right"),span:e[n].querySelector("span"),inputs:e[n].querySelectorAll("input"),observers:[]};u(i),t[e[n].id]=i}}(),Object.freeze({addObserver:function(e,n){t[e].observers.push(n)},getValue:function(n){const i=t[n],s=e(i);return s>=0?i.inputs[s].value:null},setValue:function(e,n){const s=t[e];for(let t=0;t<s.inputs.length;++t)s.inputs[t].checked=s.inputs[t].value===n;i(s,!1)}})}();
const Range=function(){function t(t){const n="input[type=range][id="+t+"]",e=document.querySelector(n);return e||console.error("Cannot find range '"+n+"'."),e}function n(n,e,o){const u=t(n);return!!u&&(u.addEventListener(o,function(t){t.stopPropagation(),e(+u.value)},!1),!0)}const e=16;function o(t,n){n.textContent=t.value;const o=document.body.getBoundingClientRect(),u=t.getBoundingClientRect(),r=n.getBoundingClientRect(),i=(t.value-t.min)/(t.max-t.min),c=u.top-r.height-o.top-4,a=i*(u.width-e)+(u.left+.5*e)-o.left;n.style.top=c+"px",n.style.left=a-.5*r.width+"px"}window.addEventListener("load",function(){const t=document.querySelectorAll(".tooltip");Array.prototype.forEach.call(t,function(t){const n=t.previousElementSibling;var e;(e=n).type&&"range"===e.type.toLowerCase()&&(n.parentNode.addEventListener("mouseenter",function(){o(n,t)},!1),n.addEventListener("input",function(){o(n,t)},!1))})});const u=!!window.MSInputMethodContext&&!!document.documentMode;return Object.freeze({addObserver:function(t,e){return n(t,e,u?"change":"input")},addLazyObserver:function(t,e){return n(t,e,"change")},getValue:function(n){const e=t(n);return e?+e.value:null},setValue:function(n,e){const o=t(n);o&&(o.value=e)}})}();
const Tabs=function(){function t(t){const e="div.tabs[id="+t+"-id]",n=document.querySelector(e);return n||console.error("Cannot find tabs '"+e+"'."),n}function e(t){const e=[],n=t.querySelectorAll("input");return Array.prototype.forEach.call(n,function(t){t.checked&&e.push(t.value)}),e}return Object.freeze({addObserver:function(n,r){const o=t(n);if(o){const t=o.querySelectorAll("input");return Array.prototype.forEach.call(t,function(t){t.addEventListener("change",function(t){t.stopPropagation(),r(e(o))},!1)}),!0}return!1},getValues:function(n){const r=t(n);return r?e(r):[]},setValues:function(e,n){const r=t(e),o=r.querySelectorAll("input");Array.prototype.forEach.call(o,function(t){t.checked=!1});for(let t=0;t<n.length;++t){const o=e+"-"+n[t]+"-id";r.querySelector("input[id="+o+"]").checked=!0}}})}();
const Checkbox=function(){function e(e){const n="input[type=checkbox][id="+e+"]",c=document.querySelector(n);return c||console.error("Cannot find checkbox '"+n+"'."),c}return Object.freeze({addObserver:function(n,c){const t=e(n);return!!t&&(t.addEventListener("change",function(e){e.stopPropagation(),c(e.target.checked)},!1),!0)},setChecked:function(n,c){const t=e(n);t&&(t.checked=!!c)},isChecked:function(n){const c=e(n);return c&&c.checked}})}();
const FileControl=function(){const n=16;function e(n){const e=document.querySelector(n);return e||console.error("Cannot find input file '"+n+"'."),e}function t(n){return e("input[type=file][id="+n+"]")}return window.addEventListener("load",function(){const e=document.querySelectorAll(".file-control.upload > label");Array.prototype.forEach.call(e,function(e){const o=t(e.htmlFor);if(o){const t=e.querySelector("span");o.addEventListener("change",function(){var e;1===o.files.length&&(t.innerText=(e=o.files[0].name).length>n?e.substring(0,15)+"..."+e.substring(e.length-15):e)},!1)}})}),Object.freeze({addDownloadObserver:function(n,t){const o=function(n){return e(".file-control.download > label[id="+n+"]")}(n);return!!o&&(o.addEventListener("click",function(){event.stopPropagation(),t()},!1),!0)},addUploadObserver:function(n,e){const o=t(n);return!!o&&(o.addEventListener("change",function(){event.stopPropagation(),1===o.files.length&&e(o.files)},!1),!0)}})}();
Canvas.setMaxSize(512,512);