var Page;!function(e){var r,o;function a(e){return o.querySelector("span[id=error-message-"+e+"]")}r=e.Demopage||(e.Demopage={}),e="error-messages",(o=document.getElementById(e))||console.error("Cannot find element '"+e+"'."),r.setErrorMessage=function(e,r){var n;o&&((n=a(e))?n.innerHTML=r:((n=document.createElement("span")).id="error-message-"+e,n.innerText=r,o.appendChild(n),o.appendChild(document.createElement("br"))))},r.removeErrorMessage=function(e){var r;!o||(r=a(e))&&((e=r.nextElementSibling)&&o.removeChild(e),o.removeChild(r))}}(Page=Page||{});
var Page;!function(e){var r,n,i;function l(e){this.queryParameters={};var r=e.indexOf(l.queryDelimiter);if(r<0)this.baseUrl=e;else{this.baseUrl=e.substring(0,r);for(var t=0,a=e.substring(r+l.queryDelimiter.length).split(l.parameterDelimiter);t<a.length;t++){var n,i=a[t],o=i.split(l.keyValueDelimiter);2===o.length?(n=decodeURIComponent(o[0]),o=decodeURIComponent(o[1]),this.queryParameters[n]=o):console.log("Unable to parse query string parameter '"+i+"'.")}}}function o(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.join(":")+":"}function s(e){window.history.replaceState("","",e)}r=e.Helpers||(e.Helpers={}),e=r.URL||(r.URL={}),n="page",l.prototype.setQueryParameter=function(e,r){null===r?delete this.queryParameters[e]:this.queryParameters[e]=r},l.prototype.loopOnParameters=function(e,r){for(var t=0,a=Object.keys(this.queryParameters);t<a.length;t++){var n,i=a[t];0===i.indexOf(e)&&i.length>e.length&&(n=this.queryParameters[i],r(i.substring(e.length),n))}},l.prototype.buildUrl=function(){for(var e=[],r=0,t=Object.keys(this.queryParameters);r<t.length;r++){var a=t[r],n=this.queryParameters[a],a=encodeURIComponent(a),n=encodeURIComponent(n);e.push(a+l.keyValueDelimiter+n)}var i=e.join(l.parameterDelimiter);return i?this.baseUrl+l.queryDelimiter+i:this.baseUrl},l.queryDelimiter="?",l.parameterDelimiter="&",l.keyValueDelimiter="=",i=l,e.loopOnParameters=function(e,r){var t=new i(window.location.href),e=o(n,e);t.loopOnParameters(e,r)},e.setQueryParameter=function(e,r,t){var a=new i(window.location.href),e=o(n,e);a.setQueryParameter(e+r,t),s(a.buildUrl())},e.removeQueryParameter=function(e,r){var t=new i(window.location.href),e=o(n,e);t.setQueryParameter(e+r,null),s(t.buildUrl())},(r.Events||(r.Events={})).callAfterDOMLoaded=function(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}}(Page=Page||{});
var Page;!function(e){(e.Controls||(e.Controls={})).setVisibility=function(e,n){var o;(e=(o="div#control-"+e,(e=document.querySelector(o))||console.error("Cannot find control '"+o+"'."),e))&&(e.style.display=n?"":"none")}}(Page=Page||{}),function(e){(e.Sections||(e.Sections={})).setVisibility=function(e,n){var o;o="section#section-"+e,(e=document.querySelector(o))||console.error("Cannot find section '"+o+"'."),e&&(e.style.display=n?"":"none",function(e){function n(e){return"hr"===e.tagName.toLowerCase()}function o(e){return"none"!==e.style.display}for(var t=e.querySelectorAll("section, hr"),i=!1,r=0;r<t.length;r++)n(t[r])?(t[r].style.display=i?"none":"",i=!0):o(t[r])&&(i=!1);for(r=0;r<t.length;r++)if(n(t[r]))t[r].style.display="none";else if(o(t[r]))break;for(r=t.length-1;0<=r;r--)if(n(t[r]))t[r].style.display="none";else if(o(t[r]))break}(e.parentElement))}}(Page=Page||{});
var Page;!function(r){var e,i,t,n,a,o,u,s;function l(e){var t=this;this.observers=[],this.id=e.id,this.container=e,this.leftButton=e.querySelector(".picker-button.left"),this.rightButton=e.querySelector(".picker-button.right"),this.spanElement=e.querySelector("span"),this.radioInputs=[];for(var n=e.querySelectorAll("input"),r=0;r<n.length;r++)this.radioInputs.push(n[r]);this.leftButton.addEventListener("click",function(){var e=t.getIndexOfCheckedInput();t.checkOnlyRadio(e-1,t.radioInputs.length-1),t.updateValue(),a.storeState(t),t.callObservers()}),this.rightButton.addEventListener("click",function(){var e=t.getIndexOfCheckedInput();t.checkOnlyRadio(e+1,0),t.updateValue(),a.storeState(t),t.callObservers()}),this.updateValue()}e=r.Picker||(r.Picker={}),Object.defineProperty(l.prototype,"value",{get:function(){return this._value},set:function(e){for(var t=0,n=this.radioInputs;t<n.length;t++){var r=n[t];r.checked=r.value===e}this.updateValue()},enumerable:!1,configurable:!0}),l.prototype.callObservers=function(){for(var e=0,t=this.observers;e<t.length;e++)(0,t[e])(this.value)},l.prototype.getIndexOfCheckedInput=function(){for(var e=0;e<this.radioInputs.length;e++)if(this.radioInputs[e].checked)return e;return-1},l.prototype.updateValue=function(){var e=this.getIndexOfCheckedInput();this._value=0<=e?this.radioInputs[e].value:null,this.updateAppearance()},l.prototype.updateAppearance=function(){var e=this.getIndexOfCheckedInput(),e=0<=e?this.radioInputs[e].dataset.label:this.container.dataset.placeholder||"";this.spanElement.innerText=e,this.radioInputs.length<0?(this.enableButton(this.leftButton,!1),this.enableButton(this.rightButton,!1)):(this.enableButton(this.leftButton,!this.radioInputs[0].checked),this.enableButton(this.rightButton,!this.radioInputs[this.radioInputs.length-1].checked))},l.prototype.enableButton=function(e,t){e.disabled=!t},l.prototype.checkOnlyRadio=function(e,t){for(var n=0,r=this.radioInputs;n<r.length;n++)r[n].checked=!1;0<=e&&e<this.radioInputs.length?this.radioInputs[e].checked=!0:this.radioInputs[t].checked=!0},s=l,(t=i=i||{}).getPickerById=function(e){return t.load(),n[e]||null},t.load=function(){void 0===n&&(n=function(){for(var e={},t=document.querySelectorAll("div.inline-picker[id]"),n=0;n<t.length;n++){var r=new s(t[n]);e[r.id]=r}return e}())},o=a=a||{},u="picker",o.storeState=function(e){var t=null===e.value?"__null__":e.value;r.Helpers.URL.setQueryParameter(u,e.id,t)},o.clearStoredState=function(e){r.Helpers.URL.removeQueryParameter(u,e.id)},o.applyStoredState=function(){r.Helpers.URL.loopOnParameters(u,function(e,t){var n=i.getPickerById(e);n?(n.value=t,n.callObservers()):r.Helpers.URL.removeQueryParameter(u,e)})},r.Helpers.Events.callAfterDOMLoaded(function(){i.load(),a.applyStoredState()}),e.addObserver=function(e,t){i.getPickerById(e).observers.push(t)},e.getValue=function(e){return i.getPickerById(e).value},e.setValue=function(e,t){i.getPickerById(e).value=t},e.storeState=function(e){e=i.getPickerById(e),a.storeState(e)},e.clearStoredState=function(e){e=i.getPickerById(e),a.clearStoredState(e)}}(Page=Page||{});
var Page;!function(p){!function(e){var r,t,n,a,i,o,s=(Object.defineProperty(l.prototype,"value",{get:function(){return this._value},set:function(e){this.inputElement.value=""+e,this.reloadValue()},enumerable:!1,configurable:!0}),l.prototype.callObservers=function(){this.callSpecificObservers(this.onInputObservers),this.callSpecificObservers(this.onChangeObservers)},l.prototype.callSpecificObservers=function(e){for(var t=0,n=e;t<n.length;t++)(0,n[t])(this.value)},l.prototype.updateAppearance=function(){var e=(+this.inputElement.value-+this.inputElement.min)/(+this.inputElement.max-+this.inputElement.min),e=Math.max(0,Math.min(1,e));this.progressLeftElement.style.width=100*e+"%",e=this.nbDecimalsToDisplay<0?this.inputElement.value:(+this.inputElement.value).toFixed(this.nbDecimalsToDisplay),this.tooltipElement.textContent=e},l.prototype.reloadValue=function(){this._value=+this.inputElement.value,this.updateAppearance()},l.getMaxNbDecimals=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=-1,r=0,a=e;r<a.length;r++){var i=a[r],o=l.nbDecimals(i);if(i<0)return-1;n<o&&(n=o)}return n},l.nbDecimals=function(e){e=e.toString();return/^[0-9]+$/.test(e)?0:/^[0-9]+\.[0-9]+$/.test(e)?e.length-(e.indexOf(".")+1):-1},l);function l(e){var t=this;this.onInputObservers=[],this.onChangeObservers=[],this.inputElement=e.querySelector("input[type='range']"),this.progressLeftElement=e.querySelector(".range-progress-left"),this.tooltipElement=e.querySelector("output.range-tooltip"),this.id=this.inputElement.id;var n=+this.inputElement.min,r=+this.inputElement.max,e=+this.inputElement.step;this.nbDecimalsToDisplay=l.getMaxNbDecimals(n,r,e),this.inputElement.addEventListener("input",function(e){e.stopPropagation(),t.reloadValue(),t.callSpecificObservers(t.onInputObservers)}),this.inputElement.addEventListener("change",function(e){e.stopPropagation(),t.reloadValue(),a.storeState(t),t.callSpecificObservers(t.onChangeObservers)}),this.reloadValue()}(t=r=r||{}).getRangeById=function(e){return t.load(),n[e]||null},t.load=function(){void 0===n&&(n=function(){for(var e={},t=document.querySelectorAll(".range-container > input[type='range']"),n=0;n<t.length;n++){var r=t[n].parentElement;e[t[n].id]=new s(r)}return e}())},i=a=a||{},o="range",i.storeState=function(e){var t=""+e.value;p.Helpers.URL.setQueryParameter(o,e.id,t)},i.clearStoredState=function(e){p.Helpers.URL.removeQueryParameter(o,e.id)},i.applyStoredState=function(){p.Helpers.URL.loopOnParameters(o,function(e,t){var n=r.getRangeById(e);n?(n.value=+t,n.callObservers()):(console.log("Removing invalid query parameter '"+e+"="+t+"'."),p.Helpers.URL.removeQueryParameter(o,e))})},p.Helpers.Events.callAfterDOMLoaded(function(){r.load(),a.applyStoredState()});var u=!!window.MSInputMethodContext&&!!document.documentMode;e.addObserver=function(e,t){return!!(e=r.getRangeById(e))&&((u?e.onChangeObservers:e.onInputObservers).push(t),!0)},e.addLazyObserver=function(e,t){return!!(e=r.getRangeById(e))&&(e.onChangeObservers.push(t),!0)},e.getValue=function(e){return(e=r.getRangeById(e))?e.value:null},e.setValue=function(e,t){(e=r.getRangeById(e))&&(e.value=t)},e.storeState=function(e){e=r.getRangeById(e),a.storeState(e)},e.clearStoredState=function(e){e=r.getRangeById(e),a.clearStoredState(e)}}(p.Range||(p.Range={}))}(Page=Page||{});
var Page;!function(o){var e,c,t,r,n,a,i,d,l,s;function h(e){var t=this;this.observers=[],this.id=e.id,this.element=e,this.reloadValue(),this.element.addEventListener("change",function(){t.reloadValue(),n.storeState(t),t.callObservers()})}e=o.Checkbox||(o.Checkbox={}),Object.defineProperty(h.prototype,"checked",{get:function(){return this._checked},set:function(e){this.element.checked=e,this.reloadValue()},enumerable:!1,configurable:!0}),h.prototype.callObservers=function(){for(var e=0,t=this.observers;e<t.length;e++)(0,t[e])(this.checked)},h.prototype.reloadValue=function(){this._checked=this.element.checked},s=h,(t=c=c||{}).getCheckboxById=function(e){return t.load(),r[e]||null},t.load=function(){void 0===r&&(r=function(){for(var e={},t=document.querySelectorAll("div.checkbox > input[type=checkbox][id]"),r=0;r<t.length;r++){var o=new s(t[r]);e[o.id]=o}return e}())},a=n=n||{},i="checkbox",d="true",l="false",a.storeState=function(e){var t=e.checked?d:l;o.Helpers.URL.setQueryParameter(i,e.id,t)},a.clearStoredState=function(e){o.Helpers.URL.removeQueryParameter(i,e.id)},a.applyStoredState=function(){o.Helpers.URL.loopOnParameters(i,function(e,t){var r=c.getCheckboxById(e);!r||t!==d&&t!==l?(console.log("Removing invalid query parameter '"+e+"="+t+"'."),o.Helpers.URL.removeQueryParameter(i,e)):(r.checked=t===d,r.callObservers())})},o.Helpers.Events.callAfterDOMLoaded(function(){c.load(),n.applyStoredState()}),e.addObserver=function(e,t){return!!(e=c.getCheckboxById(e))&&(e.observers.push(t),!0)},e.setChecked=function(e,t){(e=c.getCheckboxById(e))&&(e.checked=t)},e.isChecked=function(e){return!!(e=c.getCheckboxById(e))&&e.checked},e.storeState=function(e){e=c.getCheckboxById(e),n.storeState(e)},e.clearStoredState=function(e){e=c.getCheckboxById(e),n.clearStoredState(e)}}(Page=Page||{});
var Page;!function(n){var e,s,t,r,o,a,l,i;function u(e){var t=this;this.observers=[],this.id=u.computeShortId(e.id),this.inputElements=[];for(var r=e.querySelectorAll("input"),a=0;a<r.length;a++)this.inputElements.push(r[a]),r[a].addEventListener("change",function(e){e.stopPropagation(),t.reloadValues(),o.storeState(t),t.callObservers()},!1);this.reloadValues()}e=n.Tabs||(n.Tabs={}),u.computeShortId=function(e){if(e.lastIndexOf(u.ID_SUFFIX)!=e.length-u.ID_SUFFIX.length)throw new Error("Invalid tabs container id: '"+e+"'.");return e.substring(0,e.length-u.ID_SUFFIX.length)},Object.defineProperty(u.prototype,"values",{get:function(){return this._values},set:function(e){for(var t=0,r=this.inputElements;t<r.length;t++){for(var a=r[t],n=!1,s=0,o=e;s<o.length;s++){var l=o[s];if(a.value===l){n=!0;break}}a.checked=n}this.reloadValues()},enumerable:!1,configurable:!0}),u.prototype.callObservers=function(){for(var e=0,t=this.observers;e<t.length;e++)(0,t[e])(this._values)},u.prototype.reloadValues=function(){for(var e=[],t=0,r=this.inputElements;t<r.length;t++){var a=r[t];a.checked&&e.push(a.value)}this._values=e},u.ID_SUFFIX="-id",i=u,(t=s=s||{}).getTabsById=function(e){return t.load(),r[e]||null},t.load=function(){void 0===r&&(r=function(){for(var e={},t=document.querySelectorAll("div.tabs[id]"),r=0;r<t.length;r++){var a=new i(t[r]);e[a.id]=a}return e}())},a=o=o||{},l="tabs",a.storeState=function(e){var t=e.values.join(";");n.Helpers.URL.setQueryParameter(l,e.id,t)},a.clearStoredState=function(e){n.Helpers.URL.removeQueryParameter(l,e.id)},a.applyStoredState=function(){n.Helpers.URL.loopOnParameters(l,function(e,t){var r=t.split(";"),a=s.getTabsById(e);a?(a.values=r,a.callObservers()):(console.log("Removing invalid query parameter '"+e+"="+t+"'."),n.Helpers.URL.removeQueryParameter(l,e))})},n.Helpers.Events.callAfterDOMLoaded(function(){s.load(),o.applyStoredState()}),e.addObserver=function(e,t){return!!(e=s.getTabsById(e))&&(e.observers.push(t),!0)},e.getValues=function(e){return s.getTabsById(e).values},e.setValues=function(e,t,r){void 0===r&&(r=!1),(e=s.getTabsById(e)).values=t,r&&o.storeState(e)},e.storeState=function(e){e=s.getTabsById(e),o.storeState(e)},e.clearStoredState=function(e){e=s.getTabsById(e),o.clearStoredState(e)}}(Page=Page||{});
var Page;!function(f){!function(e){function a(e,t,n){return Math.max(t,Math.min(n,e))}function u(e,t,n){return a(Math.round(e),t,n)}function l(e,t){return(e%t+t)%t}var s;function t(e){e=e.toString(16).toUpperCase();return 2===e.length?e:"0"+e}(p=s=s||{}).parseHexa=function(e){return/^#[0-9a-fA-F]{6}$/.test(e)?e.toUpperCase():null},p.hsvToRgb=function(e){var t=e.h/60,n=(r=e.s*e.v)*(1-Math.abs(l(t,2)-1)),n=t<=1?{r:r,g:n,b:0}:t<=2?{r:n,g:r,b:0}:t<=3?{r:0,g:r,b:n}:t<=4?{r:0,g:n,b:r}:t<=5?{r:n,g:0,b:r}:{r:r,g:0,b:n},r=e.v-r;return n.r=u(255*(n.r+r),0,255),n.g=u(255*(n.g+r),0,255),n.b=u(255*(n.b+r),0,255),n},p.rgbToHsv=function(e){var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),o=i-Math.min(t,n,r),e={h:0,s:0,v:i};return 0!=o&&(i===t?e.h=(n-r)/o%6*60:i===n?e.h=60*((r-t)/o+2):i===r&&(e.h=60*((t-n)/o+4))),0!==i&&(e.s=o/i),e.h=l(e.h,360),e},p.rgbToHex=function(e){return"#"+t(e.r)+t(e.g)+t(e.b)},p.hexToRgb=function(e){return{r:parseInt(e.substring(1,3),16),g:parseInt(e.substring(3,5),16),b:parseInt(e.substring(5,7),16)}};var i,n,r,o,p,h,c=(Object.defineProperty(d.prototype,"value",{get:function(){return this.element.dataset.currentColor},set:function(e){if(this.value!==e){this.element.dataset.currentColor=e,this.updateVisiblePart();for(var t=s.hexToRgb(e),n=0,r=this.observers;n<r.length;n++)(0,r[n])(t)}},enumerable:!1,configurable:!0}),d.prototype.attachPopup=function(e){this.element.parentElement.appendChild(e)},d.prototype.updateVisiblePart=function(){var e=this.value;this.colorPreview.style.background=e,this.colorPreviewText.textContent=e},d);function d(e){var t=this;this.observers=[],this.element=e,this.id=e.id,this.colorPreview=e.querySelector(".color-preview"),this.colorPreviewText=e.querySelector(".color-value"),this.updateVisiblePart(),this.element.addEventListener("click",function(){v.assignPopup(t)})}(n=i=i||{}).getColorPickerById=function(e){return n.load(),r[e]||null},n.load=function(){void 0===r&&(r=function(){for(var e={},t=document.querySelectorAll(".color-picker[id]"),n=0;n<t.length;n++){var r=new c(t[n]);e[t[n].id]=r}return e}())},p=o=o||{},h="color-picker",p.storeState=function(e){f.Helpers.URL.setQueryParameter(h,e.id,e.value)},p.clearStoredState=function(e){f.Helpers.URL.removeQueryParameter(h,e.id)},p.applyStoredState=function(){f.Helpers.URL.loopOnParameters(h,function(e,t){var n=i.getColorPickerById(e),r=s.parseHexa(t);n&&r?n.value=r:(console.log("Removing invalid query parameter '"+e+"="+t+"'."),f.Helpers.URL.removeQueryParameter(h,e))})};var v=(g.assignPopup=function(e){g.popup||(g.popup=new g),g.popup.attach(e)},g.prototype.updateAppearance=function(){var e=s.hsvToRgb(this.hsv),t=s.rgbToHex(e),n="rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"),r="hsl(".concat(Math.round(this.hsv.h),", 100%, 50%)");this.hueColorFilter.style.background="linear-gradient(to right, white, ".concat(r,")"),this.hueCursor.style.background=r,this.valueSaturationCursor.style.background=n,this.previewColor.style.background=n,this.previewHexaValue.value=t.substring(1),this.previewRgbValue.textContent="".concat(e.r,", ").concat(e.g,", ").concat(e.b);t=g.percentageString(this.hsv.s),e=g.percentageString(this.hsv.v);this.previewHslValue.textContent="".concat(Math.round(this.hsv.h),"°, ").concat(t,", ").concat(e),this.hueCursor.style.left=g.percentageString(this.hsv.h/360),this.valueSaturationCursor.style.left=t,this.valueSaturationCursor.style.top=g.percentageString(1-this.hsv.v)},g.prototype.onInput=function(){var e=s.hsvToRgb(this.hsv),e=s.rgbToHex(e);this.updateAppearance(),this.currentControl&&(this.currentControl.value=e),o.storeState(this.currentControl)},g.prototype.attach=function(e){e=(this.currentControl=e).value,e=s.hexToRgb(e),e=s.rgbToHsv(e);g.popup.hsv.h=e.h,g.popup.hsv.v=e.v,g.popup.hsv.s=e.s,g.popup.updateAppearance(),this.popupElement.style.top="",this.popupElement.style.left="",this.currentControl.attachPopup(this.popupElement),this.fitPopupToContainer()},g.prototype.fitPopupToContainer=function(){var e,t,n,r,i,o;this.popupElement.parentElement&&(r=(i=(document.querySelector(".controls-block")||document.body).getBoundingClientRect()).left+i.width-16,e=i.top+i.height-16,this.popupElement.style.maxWidth=i.width-32+"px",this.popupElement.style.maxHeight=i.height-32+"px",t=this.popupElement.parentElement.getBoundingClientRect(),o=this.popupElement.getBoundingClientRect(),n=Math.max(0,i.left+16-t.left),r=Math.min(0,r-(t.left+o.width)),i=Math.max(0,i.top+16-t.top),o=Math.min(0,e-(t.top+o.height)),this.popupElement.style.left=n+r+"px",this.popupElement.style.top=i+o+"px")},g.prototype.registerCursorEvent=function(r,l){function s(e,t){var n=r.getBoundingClientRect(),e=(e-n.left)/n.width,n=(t-n.top)/n.height;return{x:Math.max(0,Math.min(1,e)),y:Math.max(0,Math.min(1,n))}}var n=r.querySelector(".cursor"),i={x:0,y:0},p=!1;r.addEventListener("mousedown",function(e){var t;p=!0,i.x=0,i.y=0,n&&e.target===n?(t=n.getBoundingClientRect(),i.x=.5*t.width-(e.clientX-t.left),i.y=.5*t.height-(e.clientY-t.top)):(e=s(e.clientX,e.clientY),l(e))}),window.addEventListener("mouseup",function(){p=!1}),window.addEventListener("mousemove",function(e){p&&(e=s(e.clientX+i.x,e.clientY+i.y),l(e))});var h=[];r.addEventListener("touchstart",function(e){p=!0;for(var t=0===h.length,n=0;n<e.changedTouches.length;++n){for(var r=e.changedTouches[n],i=!1,o=0,a=h;o<a.length;o++){var u=a[o];if(r.identifier===u){i=!0;break}}i||h.push(r.identifier)}t&&0<h.length&&(t=s(e.changedTouches[0].clientX,e.changedTouches[0].clientY),l(t))},!1),window.addEventListener("touchend",function(e){for(var t=0<h.length,n=0;n<e.changedTouches.length;++n)for(var r=e.changedTouches[n],i=0;i<h.length;++i)r.identifier===h[i]&&(h.splice(i,1),i--);t&&0===h.length&&(p=!1)}),window.addEventListener("touchmove",function(e){if(0<h.length&&p)for(var t=e.changedTouches,n=0;n<t.length;++n)for(var r=t[n],i=0,o=h;i<o.length;i++){var a=o[i];if(r.identifier===a){a=s(r.clientX,r.clientY);return l(a),void e.preventDefault()}}},{passive:!1})},g.buildElement=function(e,t){e=document.createElement(e);return t&&(e.className=t.join(" ")),e},g.buildPreviewText=function(e,t){var n=document.createElement("tr"),r=document.createElement("td");r.textContent=t+":";t=document.createElement("td");return n.appendChild(r),n.appendChild(t),e.appendChild(n),t},g.percentageString=function(e){return Math.round(100*e)+"%"},g);function g(){var t=this;this.hsv={h:200,s:.75,v:.5},this.popupElement=g.buildElement("div",["popup","color-picker-popup"]),this.valueSaturationPicker=g.buildElement("div",["block","picker","value-saturation-picker"]),this.hueColorFilter=g.buildElement("span",["color-filter","outlined"]),this.valueSaturationPicker.appendChild(this.hueColorFilter);var e=g.buildElement("span",["color-filter","outlined"]);e.style.background="linear-gradient(to top, black, rgba(0,0,0,0))",this.valueSaturationPicker.appendChild(e),this.valueSaturationCursor=g.buildElement("span",["cursor"]),this.valueSaturationPicker.appendChild(this.valueSaturationCursor),this.popupElement.appendChild(this.valueSaturationPicker),this.huePicker=g.buildElement("div",["block","picker","hue-picker"]);var n=g.buildElement("span",["hue-bar"]);this.huePicker.appendChild(n),this.hueCursor=g.buildElement("span",["cursor"]),this.huePicker.appendChild(this.hueCursor),this.popupElement.appendChild(this.huePicker);var r=g.buildElement("div",["preview-block"]);this.previewColor=g.buildElement("div",["preview-color","outlined"]),this.previewColor.classList.add("block"),r.appendChild(this.previewColor);var i=g.buildElement("table",["block"]),e=g.buildPreviewText(i,"hexa"),n=g.buildElement("span");n.textContent="#",e.appendChild(n),this.previewHexaValue=document.createElement("input"),this.previewHexaValue.type="text",this.previewHexaValue.minLength=6,this.previewHexaValue.maxLength=6,this.previewHexaValue.size=6,this.previewHexaValue.pattern="[0-9a-fA-F]{6}",this.previewHexaValue.addEventListener("input",function(){var e="#"+t.previewHexaValue.value;s.parseHexa(e)&&(e=s.hexToRgb(e),e=s.rgbToHsv(e),t.hsv.h=e.h,t.hsv.s=e.s,t.hsv.v=e.v,t.onInput())}),e.appendChild(this.previewHexaValue),this.previewRgbValue=g.buildPreviewText(i,"rgb"),this.previewHslValue=g.buildPreviewText(i,"hsv"),r.appendChild(i),this.popupElement.appendChild(r),this.registerCursorEvent(this.huePicker,function(e){t.hsv.h=u(360*e.x,0,360),t.onInput()}),this.registerCursorEvent(this.valueSaturationPicker,function(e){t.hsv.s=a(e.x,0,1),t.hsv.v=a(1-e.y,0,1),t.onInput(),t.valueSaturationCursor.style.left=g.percentageString(e.x),t.valueSaturationCursor.style.top=g.percentageString(e.y)});var o=!1;this.popupElement.addEventListener("mousedown",function(){o=!0}),window.addEventListener("mouseup",function(e){t.popupElement.contains(e.target)||!t.popupElement.parentElement||o||t.popupElement.parentElement.removeChild(t.popupElement),o=!1})}f.Helpers.Events.callAfterDOMLoaded(function(){i.load(),o.applyStoredState()}),e.addObserver=function(e,t){return(e=i.getColorPickerById(e))&&e.observers.push(t),!1},e.getValue=function(e){return e=i.getColorPickerById(e).value,s.hexToRgb(e)},e.getValueHex=function(e){return i.getColorPickerById(e).value},e.setValue=function(e,t,n,r){r={r:u(t,0,255),g:u(n,0,255),b:u(r,0,255)},r=s.rgbToHex(r),i.getColorPickerById(e).value=r},e.storeState=function(e){e=i.getColorPickerById(e),o.storeState(e)},e.clearStoredState=function(e){e=i.getColorPickerById(e),o.clearStoredState(e)}}(f.ColorPicker||(f.ColorPicker={}))}(Page=Page||{});
var Page;!function(e){var n,r,t,l,o,i,a;function u(e){var r=this;this.observers=[],this.inputElement=e.querySelector("input"),this.labelSpanElement=e.querySelector("label > span"),this.inputElement.addEventListener("change",function(e){e.stopPropagation();var n=r.inputElement.files;if(1===n.length){r.labelSpanElement.innerText=u.truncate(n[0].name);for(var t=0,l=r.observers;t<l.length;t++)(0,l[t])(n)}},!1)}n=e.FileControl||(e.FileControl={}),u.prototype.clear=function(){this.inputElement.value="",this.labelSpanElement.innerText=this.labelSpanElement.dataset.placeholder},u.truncate=function(e){return e.length>u.filenameMaxSize?e.substring(0,u.filenameMaxSize-1)+"..."+e.substring(e.length-(u.filenameMaxSize-1)):e},u.filenameMaxSize=16,r=u,a=function(e){var l=this;this.observers=[],this.buttonElement=e.querySelector("input"),this.buttonElement.addEventListener("click",function(e){e.stopPropagation();for(var n=0,t=l.observers;n<t.length;n++)(0,t[n])()},!1)},(l=t=t||{}).getFileUploadById=function(e){return l.load(),o[e]||null},l.getFileDownloadById=function(e){return l.load(),i[e]||null},l.load=function(){void 0===o&&(o=function(){for(var e={},n=document.querySelectorAll(".file-control.upload > input[id]"),t=0;t<n.length;t++){var l=n[t].parentElement;e[n[t].id]=new r(l)}return e}()),void 0===i&&(i=function(){for(var e={},n=document.querySelectorAll(".file-control.download > input[id]"),t=0;t<n.length;t++){var l=n[t].parentElement;e[n[t].id]=new a(l)}return e}())},e.Helpers.Events.callAfterDOMLoaded(function(){t.load()}),n.addDownloadObserver=function(e,n){return!!(e=t.getFileDownloadById(e))&&(e.observers.push(n),!0)},n.addUploadObserver=function(e,n){return!!(e=t.getFileUploadById(e))&&(e.observers.push(n),!0)},n.clearFileUpload=function(e){t.getFileUploadById(e).clear()}}(Page=Page||{});

var Page;!function(J){!function(n){function t(e){var n=document.querySelector(e);return n||console.error("Cannot find element '"+e+"'."),n}function e(e){return t("input[type=checkbox][id="+e+"]")}var o=document.getElementById("canvas-container"),i=t("canvas[id=canvas]"),c=document.getElementById("canvas-buttons-column"),r=e("fullscreen-checkbox-id"),a=e("side-pane-checkbox-id"),u=o.querySelector(".loader"),s=512,l=512;function d(e){document.body.style.overflow=e?"hidden":"auto"}function f(){var e=i.getBoundingClientRect();return[Math.floor(e.width),Math.floor(e.height)]}r&&(J.Helpers.Events.callAfterDOMLoaded(function(){d(r.checked),r.addEventListener("change",function(){d(r.checked)})}),a&&r.addEventListener("change",function(){r.checked&&(a.checked=!1)},!1));var h=[0,0],v=[];function g(e){return e+"px"}function m(){o.style.width="100vw";var e=f();if(r.checked?(o.style.height="100%",o.style.maxWidth="",o.style.maxHeight=""):(e[1]=e[0]*l/s,o.style.height=g(e[1]),o.style.maxWidth=g(s),o.style.maxHeight=g(l)),e[0]!==h[0]||e[1]!==h[1]){h=f();for(var n=0,t=v;n<t.length;n++)(0,t[n])(h[0],h[1])}}J.Helpers.Events.callAfterDOMLoaded(m),r.addEventListener("change",m,!1),window.addEventListener("resize",m,!1);var p,y,E,w,L,k,M,C,b,S,Y,x,X,D,P,I,R=[m],T=[],H=[],U=[],z=[],q=[],B=[],O=[];function A(e,n){var t=i.getBoundingClientRect();return[(e-t.left)/t.width,(n-t.top)/t.height]}function F(e,n){y[0]=e,y[1]=n}function Q(e,n){n=A(e,n);F(n[0],n[1]),w=!0;for(var t=0,o=T;t<o.length;t++)(0,o[t])()}function W(){if(w){w=!1;for(var e=0,n=H;e<n.length;e++)(0,n[e])()}}function V(e,n){var t=A(E[0]=e,E[1]=n),o=t[0]-y[0],i=t[1]-y[1];if(y[0]=t[0],y[1]=t[1],w)for(var c=0,r=U;c<r.length;c++)(0,r[c])(o,i);for(var a=0,u=z;a<u.length;a++)(0,u[a])(t[0],t[1])}function j(e,n){var t=e.clientX-n.clientX,n=e.clientY-n.clientY;return Math.sqrt(t*t+n*n)}function G(e,n){J.Helpers.URL.setQueryParameter(x,e,n?P:I)}r&&r.addEventListener("change",function(){for(var e=r.checked,n=0,t=R;n<t.length;n++)(0,t[n])(e)},!1),document.addEventListener("keydown",function(e){27===e.keyCode&&n.toggleFullscreen(!1)}),Y=p=p||{},y=[0,0],w=!(E=[0,0]),Y.getMousePosition=function(){return[y[0],y[1]]},Y.setMousePosition=F,Y.isMouseDown=function(){return w},Y.mouseDown=Q,Y.mouseUp=W,Y.mouseMove=V,i&&(i.addEventListener("mousedown",function(e){0===e.button&&Q(e.clientX,e.clientY)},!1),i.addEventListener("mouseenter",function(){for(var e=0,n=q;e<n.length;e++)(0,n[e])()},!1),i.addEventListener("mouseleave",function(){for(var e=0,n=B;e<n.length;e++)(0,n[e])()},!1),i.addEventListener("wheel",function(e){if(0<O.length){for(var n=0<e.deltaY?1:-1,t=0,o=O;t<o.length;t++)(0,o[t])(n,y);return e.preventDefault(),!1}return!0},!1),window.addEventListener("mousemove",function(e){V(e.clientX,e.clientY)}),window.addEventListener("mouseup",function(e){0===e.button&&W()}),v.push(function(){V(E[0],E[1])})),L=[],k=0,i&&(i.addEventListener("touchstart",function(e){for(var n=0===L.length,t=0;t<e.changedTouches.length;++t){for(var o=e.changedTouches[t],i=!1,c=0,r=L;c<r.length;c++){var a=r[c];if(o.identifier===a.id){i=!0;break}}i||L.push({id:o.identifier,clientX:o.clientX,clientY:o.clientY})}n&&0<L.length?(n=L[0],p.mouseDown(n.clientX,n.clientY)):2===L.length&&(k=j(L[0],L[1]))},!1),window.addEventListener("touchend",function(e){for(var n,t=0<L.length,o=0;o<e.changedTouches.length;++o)for(var i=e.changedTouches[o],c=0;c<L.length;++c)i.identifier===L[c].id&&(L.splice(c,1),c--);1===L.length?(n=A(L[0].clientX,L[0].clientY),p.setMousePosition(n[0],n[1])):t&&0===L.length&&p.mouseUp()}),window.addEventListener("touchmove",function(e){for(var n=e.changedTouches,t=0;t<n.length;++t)for(var o=n[t],i=0,c=L;i<c.length;i++){var r=c[i];o.identifier===r.id&&(r.clientX=o.clientX,r.clientY=o.clientY)}var a=z.length+U.length;if(p.isMouseDown()&&0<a&&e.preventDefault(),1===L.length)p.mouseMove(L[0].clientX,L[0].clientY);else if(2===L.length){var e=j(L[0],L[1]),u=(k-e)/k;k=e;for(var s=A(.5*(L[0].clientX+L[1].clientX),.5*(L[0].clientY+L[1].clientY)),l=0,d=O;l<d.length;l++)(0,d[l])(5*u,s)}},{passive:!1})),Y=M=M||{},C={},b="-indicator-id",Y.getIndicator=function(e){return t("#"+e+b)},Y.getIndicatorSpan=function(e){return C[e]||(C[e]=t("#"+(e+b)+" span")),C[e]},Y=S=S||{},x="canvas",X="fullscreen",D="sidepane",P="true",I="false",Y.attachStorageEvents=function(){r&&r.addEventListener("change",function(){G(X,r.checked),J.Helpers.URL.removeQueryParameter(x,D)}),a&&a.addEventListener("change",function(){G(D,a.checked)})},Y.applyStoredState=function(){J.Helpers.URL.loopOnParameters(x,function(e,n){e!==X||n!==P&&n!==I?e!==D||n!==P&&n!==I?(console.log("Removing invalid query parameter '"+e+"="+n+"'."),J.Helpers.URL.removeQueryParameter(x,e)):a&&(a.checked=n===P):r&&(r.checked=n===P)})},S.applyStoredState(),S.attachStorageEvents(),n.Observers=Object.freeze({canvasResize:v,fullscreenToggle:R,mouseDown:T,mouseDrag:U,mouseEnter:q,mouseLeave:B,mouseMove:z,mouseWheel:O,mouseUp:H}),n.getAspectRatio=function(){var e=f();return e[0]/e[1]},n.getCanvas=function(){return i},n.getCanvasContainer=function(){return o},n.getSize=f,n.getMousePosition=function(){return p.getMousePosition()},n.isFullScreen=function(){return r&&r.checked},n.isMouseDown=function(){return p.isMouseDown()},n.setIndicatorText=function(e,n){(e=M.getIndicatorSpan(e))&&(e.innerText=n)},n.setIndicatorVisibility=function(e,n){(e=M.getIndicator(e))&&(e.style.display=n?"":"none")},n.setIndicatorsVisibility=function(e){document.getElementById("indicators").style.display=e?"":"none"},n.setMaxSize=function(e,n){s=e,l=n,m()},n.setResizable=function(e){c.style.display=e?"":"none"},n.setLoaderText=function(e){u&&(u.querySelector("span").innerText=e)},n.showLoader=function(e){u&&(u.style.display=e?"block":"")},n.toggleFullscreen=function(e){r&&e!==r.checked&&(r.checked=e,"function"==typeof window.CustomEvent?r.dispatchEvent(new CustomEvent("change")):"function"==typeof CustomEvent.prototype.initCustomEvent&&((e=document.createEvent("CustomEvent")).initCustomEvent("change",!1,!1,void 0),r.dispatchEvent(e)))}}(J.Canvas||(J.Canvas={}))}(Page=Page||{});
Page.Canvas.setMaxSize(512,512);