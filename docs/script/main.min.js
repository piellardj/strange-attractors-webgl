!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=9)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=null;t.gl=n,t.initGL=function(e){function r(e){Demopage.setErrorMessage("webgl-support",e)}var o=Canvas.getCanvas();if(t.gl=n=o.getContext("webgl",e),null==n){if(t.gl=n=o.getContext("experimental-webgl",e),null==n)return r("Your browser or device does not seem to support WebGL."),!1;r("Your browser or device only supports experimental WebGL.\nThe simulation may not run as expected.")}return n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.BLEND),n.clearColor(0,0,0,1),!0},t.adjustSize=function(e){void 0===e&&(e=!1);var t=e?window.devicePixelRatio:1,r=Math.floor(n.canvas.clientWidth*t),o=Math.floor(n.canvas.clientHeight*t);n.canvas.width===r&&n.canvas.height===o||(n.canvas.width=r,n.canvas.height=o)}},function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(3));t.attractorNames={DeJong:"de-jong",Bedhead:"bedhead",Clifford:"clifford",FractalDream:"fractal-dream"};var i={dark:"dark",light:"light",color:"color"};t.compositingNames=i;var a={ATTRACTOR:"attractor-picker-id",A:"a-range-id",B:"b-range-id",C:"c-range-id",D:"d-range-id",FORMULA:"formula-checkbox-id",INDICATORS:"indicators-checkbox-id",INTENSITY:"intensity-range-id",QUALITY:"quality-range-id",COMPOSITING:"compositing",FOREGROUND:"foreground-range-id",BACKGROUND:"background-range-id",DOWNLOAD_SIZE:"download-size",DOWNLOAD:"file-download-id"};function u(e){for(var t=0,r=e;t<r.length;t++){(0,r[t])()}}t.ControlsID=a;var s,l,c,f,d,p,h,b,g,_,m,y={clear:[],shouldComposeAgain:[]};function v(){m=C.computeNbPointsNeeded(Canvas.getSize())}function O(e){var t=e===i.color;Controls.setVisibility(a.FOREGROUND,t),Controls.setVisibility(a.BACKGROUND,t),b=e,u(y.clear)}var C=function(){function e(){}return Object.defineProperty(e,"attractor",{get:function(){return s},set:function(e){Picker.setValue(a.ATTRACTOR,e),s=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"a",{get:function(){return l},enumerable:!0,configurable:!0}),Object.defineProperty(e,"b",{get:function(){return c},enumerable:!0,configurable:!0}),Object.defineProperty(e,"c",{get:function(){return f},enumerable:!0,configurable:!0}),Object.defineProperty(e,"d",{get:function(){return d},enumerable:!0,configurable:!0}),Object.defineProperty(e,"nbPointsNeeded",{get:function(){return m},enumerable:!0,configurable:!0}),Object.defineProperty(e,"quality",{get:function(){return h},enumerable:!0,configurable:!0}),Object.defineProperty(e,"compositing",{get:function(){return b},enumerable:!0,configurable:!0}),Object.defineProperty(e,"foregroundHue",{get:function(){return g},enumerable:!0,configurable:!0}),Object.defineProperty(e,"backgroundHue",{get:function(){return _},enumerable:!0,configurable:!0}),Object.defineProperty(e,"clearObservers",{get:function(){return y.clear},enumerable:!0,configurable:!0}),Object.defineProperty(e,"shouldComposeAgainObservers",{get:function(){return y.shouldComposeAgain},enumerable:!0,configurable:!0}),e.computeNbPointsNeeded=function(e){var t=Math.min(e[0],e[1]);return p/(256*h)*t*t},e}();t.Parameters=C,Picker.addObserver(a.ATTRACTOR,function(e){s=e,u(y.clear)}),Range.addObserver(a.A,function(e){l=e,u(y.clear)}),l=Range.getValue(a.A),Range.addObserver(a.B,function(e){c=e,u(y.clear)}),c=Range.getValue(a.B),Range.addObserver(a.C,function(e){f=e,u(y.clear)}),f=Range.getValue(a.C),Range.addObserver(a.D,function(e){d=e,u(y.clear)}),d=Range.getValue(a.D),Checkbox.addObserver(a.FORMULA,function(e){o.setVisibility(e)}),o.setVisibility(Checkbox.isChecked(a.FORMULA)),Range.addObserver(a.INTENSITY,function(e){var t=e<p;p=e,v(),t&&u(y.clear)}),p=Range.getValue(a.INTENSITY),Range.addObserver(a.QUALITY,function(e){h=1-254/255*e,v(),u(y.clear)}),h=1-254/255*Range.getValue(a.QUALITY),Tabs.addObserver(a.COMPOSITING,function(e){O(""+e[0])}),O(""+Tabs.getValues(a.COMPOSITING)),Range.addObserver(a.FOREGROUND,function(e){g=e,u(y.shouldComposeAgain)}),g=Range.getValue(a.FOREGROUND),Range.addObserver(a.BACKGROUND,function(e){_=e,u(y.shouldComposeAgain)}),_=Range.getValue(a.BACKGROUND),Checkbox.addObserver(a.INDICATORS,function(e){Canvas.setIndicatorsVisibility(e)}),Canvas.setIndicatorsVisibility(Checkbox.isChecked(a.INDICATORS)),Canvas.Observers.canvasResize.push(v),v()},function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),a=n(r(7)),u=o(r(8)),s=n(r(3)),l=r(1),c=o(r(13)),f=null,d=null,p=function(){function e(){if(null===f&&a.buildShader({fragmentFilename:"points.frag",vertexFilename:"points.vert",injected:{}},function(e){null!==e&&(f=e)}),null===d){var e=new Float32Array(2);d=new u.default(i.gl,e,2,i.gl.FLOAT,!1)}this.boundaries=null}return e.prototype.drawXPoints=function(e){if(f){var t=this.computeXPoints(e);d.setData(t);var r=Canvas.getSize(),n=r[0]/r[1];f.a.aCoords.VBO=d;var o=l.Parameters.quality;f.u.uColor.value=[o,o,o,1],f.u.uCenter.value=this.boundaries.center;var a=.5+this.boundaries.maxDimension;return f.u.uScale.value=[2/a/Math.max(n,1),2/a*Math.min(n,1)],f.use(),f.bindUniformsAndAttributes(),i.gl.drawArrays(i.gl.POINTS,0,e),!0}return!1},e.prototype.reset=function(){this.toggleParametersVisibility(),s.setTitle(this.name),s.setFormula(this.formula),s.setParameters(this.parameters),this.boundaries=null},e.prototype.fillData=function(e,t){for(var r=0;r<100;++r)t(0);if(null===this.boundaries){this.boundaries=new c.default;for(r=0;r<e;++r)t(r),this.boundaries.includePoint(this.x,this.y)}else for(r=0;r<e;++r)t(r)},e}();t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o,i="Nothing You Could Do",a=8,u=8,s=24,l=20,c=16,f="blue",d="red";(n=document.createElement("link")).href="https://fonts.googleapis.com/css?family="+i.replace(" ","+"),n.rel="stylesheet",document.head.appendChild(n),function(){var e=".infos {\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        line-height: 1em;\n        margin: "+a+"px;\n        text-align: left;\n        font-family: '"+i+"', cursive;\n        font-size: "+l+"px;\n    }\n    .infos sub {\n        font-size: "+c+"px;\n    }\n    .infos div {\n        padding: "+u+"px;\n    }\n    .infos .attractor-name {\n        display: inline-block;\n        font-size: "+s+"px;\n    }\n    .infos .attractor-parameters {\n        display: inline-block;\n    }",t=document.createElement("style");t.setAttribute("type","text/css"),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),document.head.appendChild(t);var r=document.createElement("style");document.head.appendChild(r),o=r.sheet}(),_("white","black");var p=document.createElement("div");p.className="attractor-name";var h=document.createElement("div"),b=document.createElement("div");b.className="attractor-parameters";var g=document.createElement("div");function _(e,t){for(f=e,d=t;o.cssRules.length>0;)o.deleteRule(0);o.insertRule(".infos { color: "+f+"; }",0),o.insertRule(".infos div { background: "+d+"; }",0)}function m(e){g.style.display=e?"":"none"}g.className="infos",g.appendChild(p),g.appendChild(h),g.appendChild(b),m(!1),Canvas.getCanvas().parentElement.appendChild(g),t.setColors=_,t.setVisibility=m,t.setTitle=function(e){p.textContent=e},t.setFormula=function(e){function t(e,t){return t+e+t}function r(e,t){return"<"+t+">"+e+"</"+t+">"}var n=e.replace(/\s*\*\s*/g,t("&times","&#8239;"));n=(n=(n=(n=(n=(n=(n=(n=n.replace(/\s*\/\s*/g,t("&divide","&#8239;"))).replace(/\s*\+\s*/g,t("+"," "))).replace(/\s*-\s*/g,t("-"," "))).replace(/\s*=\s*/g,t("="," "))).replace(/\s*n\s*\+\s*1\s*/g,"n"+t("+","&#8239;")+"1")).replace(/\n/g,"<br/>")).replace(/_{([^}]*)}/g,function(e,t){return r(t,"sub")})).replace(/\^{([^}]*)}/g,function(e,t){return r(t,"sup")}),h.innerHTML=n},t.setParameters=function(e){b.innerHTML=e.join("<br/>")},t.drawToCanvas=function(e){function t(t){e.font=t+"px "+i}function r(t,r,n,o){var i=e.fillStyle;e.fillStyle=d,e.fillRect(t,r,n,o),e.fillStyle=i}r(a,a,p.clientWidth,p.clientHeight),e.fillStyle=f,e.textAlign="left",e.textBaseline="top";var n=a+u,o=a+u,g=s;t(g),e.fillText(p.textContent,n,o),o+=2*l,t(g=l),r(a,o-u,h.clientWidth,h.clientHeight),h.innerHTML.split(/\s*<br\/?>\s*/g).forEach(function(r){var i=0,a=0;function u(t){e.fillText(t,n+i,o),i+=e.measureText(t).width}function s(e){var t=r.indexOf(e,a);return t<0?r.length:t}for(;a<r.length;){var l=s("<sub>");u(r.substring(a,l)),a=l+5,l=s("</sub>"),o+=.4*g,t(c),u(r.substring(a,l)),o-=.4*g,a=l+6,t(g)}o+=1.25*g}),r(a,(o+=1*l)-u,b.clientWidth,b.clientHeight),b.innerHTML.split(/\s*<br\/?>\s*/g).forEach(function(t){e.fillText(t,n,o),o+=1*g})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this._gl=e}return e.prototype.gl=function(){return this._gl},e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r,n){this.left=e,this.lower=t,this.width=r,this.height=n}return e.setFullCanvas=function(e){e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight)},e.prototype.set=function(e){e.viewport(this.lower,this.left,this.width,this.height)},e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(){}}();t.default=n},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),a=n(r(11)),u=o(r(12)),s={};function l(e,t){var r=2,n=0;function o(o){function s(t){return t.replace(/#INJECT\((.*)\)/gm,function(t,r){return e.injected[r]?e.injected[r]:t})}if(o||n++,0===--r){var l=null;if(0===n){var c=u.getSource(e.vertexFilename),f=u.getSource(e.fragmentFilename),d=s(c),p=s(f);l=new a.default(i.gl,d,p)}t(l)}}u.loadSource(e.vertexFilename,o),u.loadSource(e.fragmentFilename,o)}t.getShader=function(e){return s[e].shader},t.buildShader=l,t.registerShader=function(e,t,r){function n(e){for(var t=0,r=e.callbacks;t<r.length;t++)(0,r[t])(!e.failed,e.shader);e.callbacks=[]}if(void 0===s[e]){s[e]={callbacks:[r],failed:!1,infos:t,pending:!0,shader:null};var o=s[e];l(t,function(e){o.pending=!1,o.failed=null===e,o.shader=e,n(o)})}else{var i=s[e];!0===i.pending?i.callbacks.push(r):n(i)}},t.deleteShader=function(e){s[e]&&(s[e].shader&&s[e].shader.freeGLResources(),delete s[e])}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a,u=i(r(4));!function(e){e[e.DYNAMIC=0]="DYNAMIC",e[e.STATIC=1]="STATIC"}(a||(a={}));var s=function(e){function t(t,r,n,o,i){void 0===i&&(i=!0);var u=e.call(this,t)||this;return u.id=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,u.id),i?t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW):t.bufferData(t.ARRAY_BUFFER,r,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),u.size=n,u.type=o,u.normalize=!1,u.stride=0,u.offset=0,u.usage=i?a.STATIC:a.DYNAMIC,u}return o(t,e),t.createQuad=function(e,r,n,o,i){return new t(e,new Float32Array([r,n,o,n,r,i,o,i]),2,e.FLOAT,!0)},t.prototype.freeGLResources=function(){this.gl().deleteBuffer(this.id),this.id=null},t.prototype.bind=function(t){var r=e.prototype.gl.call(this);r.enableVertexAttribArray(t),r.bindBuffer(r.ARRAY_BUFFER,this.id),r.vertexAttribPointer(t,this.size,this.type,this.normalize,this.stride,this.offset)},t.prototype.setData=function(t){var r=e.prototype.gl.call(this);r.bindBuffer(r.ARRAY_BUFFER,this.id),this.usage===a.STATIC?r.bufferData(r.ARRAY_BUFFER,t,r.STATIC_DRAW):r.bufferData(r.ARRAY_BUFFER,t,r.DYNAMIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null)},t}(u.default);t.default=s},function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(0)),a=r(0),u=o(r(10)),s=o(r(14)),l=o(r(15)),c=o(r(16)),f=n(r(3)),d=r(1),p=o(r(17)),h=o(r(19)),b=o(r(20));!function(){i.initGL({alpha:!1,depth:!1,preserveDrawingBuffer:!0});var e=!0;Canvas.Observers.canvasResize.push(function(){return e=!0}),d.Parameters.clearObservers.push(function(){return e=!0}),d.Parameters.attractor=d.attractorNames.DeJong;var t={};t[d.attractorNames.Bedhead]=new u.default,t[d.attractorNames.Clifford]=new s.default,t[d.attractorNames.DeJong]=new l.default,t[d.attractorNames.FractalDream]=new c.default;var r,n,o={};function g(e){r=e,Canvas.setIndicatorText("points-drawn",r.toLocaleString())}o[d.compositingNames.color]=new p.default,o[d.compositingNames.dark]=new h.default,o[d.compositingNames.light]=new b.default,g(0),d.Parameters.shouldComposeAgainObservers.push(function(){return n=!0});var _,m,y=Math.pow(2,16);FileControl.addDownloadObserver(d.ControlsID.DOWNLOAD,function(){var t=+Tabs.getValues(d.ControlsID.DOWNLOAD_SIZE)[0],r=d.Parameters.computeNbPointsNeeded([t,t]),n=document.createElement("canvas"),o=n.getContext("2d");n.width=t+400,n.height=t;var i=Canvas.getCanvas();Canvas.showLoader(!0),i.style.position="absolute",i.style.width=t+"px",i.style.height=t+"px",i.width=t,i.height=t,m.initialize();var u=0,s=Math.pow(2,18);for(m.bindTopLayer();u<r;)u+=s,_.drawXPoints(s);if(m.compose(),o.fillStyle=m.backgroundColor,o.fillRect(0,0,n.width,n.height),o.drawImage(a.gl.canvas,.5*(n.width-t),0,t,t),i.style.position="",i.style.width="",i.style.height="",Canvas.showLoader(!1),Canvas.setLoaderText(""),e=!0,f.drawToCanvas(o),n.msToBlob){var l=n.msToBlob();window.navigator.msSaveBlob(l,"image.png")}else n.toBlob(function(e){var t=document.createElement("a");t.download="image.png",t.href=URL.createObjectURL(e),t.click()})}),requestAnimationFrame(function i(){e&&(e=!1,g(0),(_=t[d.Parameters.attractor]).reset(),(m=o[d.Parameters.compositing]).initialize(),f.setColors(m.foregroundColor,m.backgroundColor)),r<d.Parameters.nbPointsNeeded&&(m.bindTopLayer(),_.drawXPoints(y)&&(g(r+y),m.compose())),n&&(n=!1,m.updateColors(),m.compose(),f.setColors(m.foregroundColor,m.backgroundColor)),requestAnimationFrame(i)})}()},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),u=function(e){function t(){return e.call(this)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"Bedhead"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formula",{get:function(){return"x_{n+1} = sin(x_{n}*y_{n}/b) + cos(a*x_{n} - y_{n})\n        y_{n+1} = x_{n} + sin(y_{n})/b"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parameters",{get:function(){return["a = "+a.Parameters.a,"b = "+a.Parameters.b]},enumerable:!0,configurable:!0}),t.prototype.toggleParametersVisibility=function(){Controls.setVisibility(a.ControlsID.A,!0),Controls.setVisibility(a.ControlsID.B,!0),Controls.setVisibility(a.ControlsID.C,!1),Controls.setVisibility(a.ControlsID.D,!1)},t.prototype.computeXPoints=function(e){var t=this,r=new Float32Array(2*e),n=a.Parameters.a,o=a.Parameters.b;this.x=2*Math.random()-1,this.y=2*Math.random()-1;return this.fillData(e,function(e){r[2*e+0]=Math.sin(t.x*t.y/o)+Math.cos(n*t.x-t.y),r[2*e+1]=t.x+Math.sin(t.y)/o,t.x=r[2*e+0],t.y=r[2*e+1]}),r},t}(i(r(2)).default);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(r(4));function u(e,t,r){alert("NOT IMPLEMENTED YET")}var s={35664:{str:"FLOAT_VEC2",binder:function(e,t,r){e.uniform2fv(t,r)}},35665:{str:"FLOAT_VEC3",binder:function(e,t,r){e.uniform3fv(t,r)}},35666:{str:"FLOAT_VEC4",binder:function(e,t,r){e.uniform4fv(t,r)}},35667:{str:"INT_VEC2",binder:function(e,t,r){e.uniform2iv(t,r)}},35668:{str:"INT_VEC3",binder:function(e,t,r){e.uniform3iv(t,r)}},35669:{str:"INT_VEC4",binder:function(e,t,r){e.uniform4iv(t,r)}},35670:{str:"BOOL",binder:function(e,t,r){e.uniform1i(t,+r)}},35671:{str:"BOOL_VEC2",binder:function(e,t,r){e.uniform2iv(t,r)}},35672:{str:"BOOL_VEC3",binder:function(e,t,r){e.uniform3iv(t,r)}},35673:{str:"BOOL_VEC4",binder:function(e,t,r){e.uniform4iv(t,r)}},35674:{str:"FLOAT_MAT2",binder:function(e,t,r){e.uniformMatrix2fv(t,!1,r)}},35675:{str:"FLOAT_MAT3",binder:function(e,t,r){e.uniformMatrix3fv(t,!1,r)}},35676:{str:"FLOAT_MAT4",binder:function(e,t,r){e.uniformMatrix4fv(t,!1,r)}},35678:{str:"SAMPLER_2D",binder:function(e,t,r,n){e.uniform1i(t,r),e.activeTexture(e["TEXTURE"+r]),e.bindTexture(e.TEXTURE_2D,n)}},35680:{str:"SAMPLER_CUBE",binder:function(e,t,r,n){e.uniform1i(t,r),e.activeTexture(e["TEXTURE"+r]),e.bindTexture(e.TEXTURE_CUBE_MAP,n)}},5120:{str:"BYTE",binder:u},5121:{str:"UNSIGNED_BYTE",binder:u},5122:{str:"SHORT",binder:u},5123:{str:"UNSIGNED_SHORT",binder:u},5124:{str:"INT",binder:function(e,t,r){Array.isArray(r),e.uniform1iv(t,r)}},5125:{str:"UNSIGNED_INT",binder:u},5126:{str:"FLOAT",binder:function(e,t,r){Array.isArray(r)?e.uniform1fv(t,r):e.uniform1f(t,r)}}},l=function(e){function t(t,r,n){var o=this;function i(e,r){var n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.error(t.getShaderInfoLog(n)),t.deleteShader(n),null)}(o=e.call(this,t)||this).id=null,o.uCount=0,o.aCount=0;var a=i(t.VERTEX_SHADER,r),u=i(t.FRAGMENT_SHADER,n),s=t.createProgram();return t.attachShader(s,a),t.attachShader(s,u),t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)?(o.id=s,o.introspection()):(console.error(t.getProgramInfoLog(s)),t.deleteProgram(s)),o}return o(t,e),t.prototype.freeGLResources=function(){e.prototype.gl.call(this).deleteProgram(this.id),this.id=null},t.prototype.use=function(){e.prototype.gl.call(this).useProgram(this.id)},t.prototype.bindUniforms=function(){var t=this,r=e.prototype.gl.call(this),n=0;Object.keys(this.u).forEach(function(e){var o=t.u[e];if(null!==o.value)if(35678===o.type||35680===o.type){var i=n;s[o.type].binder(r,o.loc,i,o.value),n++}else s[o.type].binder(r,o.loc,o.value)})},t.prototype.bindAttributes=function(){var e=this;Object.keys(this.a).forEach(function(t){var r=e.a[t];null!==r.VBO&&r.VBO.bind(r.loc)})},t.prototype.bindUniformsAndAttributes=function(){this.bindUniforms(),this.bindAttributes()},t.prototype.introspection=function(){var t=e.prototype.gl.call(this);this.uCount=t.getProgramParameter(this.id,t.ACTIVE_UNIFORMS),this.u=[];for(var r=0;r<this.uCount;++r){var n=t.getActiveUniform(this.id,r),o=n.name;this.u[o]={loc:t.getUniformLocation(this.id,o),size:n.size,type:n.type,value:null}}this.aCount=t.getProgramParameter(this.id,t.ACTIVE_ATTRIBUTES),this.a=[];for(r=0;r<this.aCount;++r){var i=t.getActiveAttrib(this.id,r),a=i.name;this.a[a]={VBO:null,loc:t.getAttribLocation(this.id,a),size:i.size,type:i.type}}},t}(a.default);t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.loadSource=function(e,t){function r(e){for(var t=0,r=e.callbacks;t<r.length;t++)(0,r[t])(!e.failed);e.callbacks=[]}if(void 0===n[e]){n[e]={callbacks:[t],failed:!1,pending:!0,text:null};var o=n[e],i=new XMLHttpRequest;i.open("GET","./shaders/"+e,!0),i.onload=function(){4===i.readyState&&(o.pending=!1,200===i.status?(o.text=i.responseText,o.failed=!1):(console.error("Cannot load '"+e+"' shader source: "+i.statusText),o.failed=!0),r(o))},i.onerror=function(){console.error("Cannot load '"+e+"' shader source: "+i.statusText),o.pending=!1,o.failed=!0,r(o)},i.send(null)}else{var a=n[e];!0===a.pending?a.callbacks.push(t):(a.callbacks=[t],r(a))}},t.getSource=function(e){return n[e].text}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.minX=0,this.maxX=0,this.minY=0,this.maxY=0}return Object.defineProperty(e.prototype,"center",{get:function(){return[.5*(this.maxX+this.minX),.5*(this.maxY+this.minY)]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxDimension",{get:function(){return Math.max(this.maxX-this.minX,this.maxY-this.minY)},enumerable:!0,configurable:!0}),e.prototype.includePoint=function(e,t){this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,t),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,t)},e}();t.default=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),u=function(e){function t(){return e.call(this)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"Clifford"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formula",{get:function(){return"x_{n+1} = sin(a*y_{n}) + c*cos(a*x_{n})\n        y_{n+1} = sin(c*x_{n}) + d*cos(b*y_{n})"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parameters",{get:function(){return["a = "+a.Parameters.a,"b = "+a.Parameters.b,"c = "+a.Parameters.c,"d = "+a.Parameters.d]},enumerable:!0,configurable:!0}),t.prototype.toggleParametersVisibility=function(){Controls.setVisibility(a.ControlsID.A,!0),Controls.setVisibility(a.ControlsID.B,!0),Controls.setVisibility(a.ControlsID.C,!0),Controls.setVisibility(a.ControlsID.D,!0)},t.prototype.computeXPoints=function(e){var t=this,r=new Float32Array(2*e),n=a.Parameters.a,o=a.Parameters.b,i=a.Parameters.c,u=a.Parameters.d;this.x=2*Math.random()-1,this.y=2*Math.random()-1;return this.fillData(e,function(e){r[2*e+0]=Math.sin(n*t.y)+i*Math.cos(n*t.x),r[2*e+1]=Math.sin(i*t.x)+u*Math.cos(o*t.y),t.x=r[2*e+0],t.y=r[2*e+1]}),r},t}(i(r(2)).default);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),u=function(e){function t(){return e.call(this)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"De Jong"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formula",{get:function(){return"x_{n+1} = sin(a*y_{n}) - cos(b*x_{n})\n        y_{n+1} = sin(c*x_{n}) - cos(d*y_{n})"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parameters",{get:function(){return["a = "+a.Parameters.a,"b = "+a.Parameters.b,"c = "+a.Parameters.c,"d = "+a.Parameters.d]},enumerable:!0,configurable:!0}),t.prototype.toggleParametersVisibility=function(){Controls.setVisibility(a.ControlsID.A,!0),Controls.setVisibility(a.ControlsID.B,!0),Controls.setVisibility(a.ControlsID.C,!0),Controls.setVisibility(a.ControlsID.D,!0)},t.prototype.computeXPoints=function(e){var t=this,r=new Float32Array(2*e),n=a.Parameters.a,o=a.Parameters.b,i=a.Parameters.c,u=a.Parameters.d;this.x=2*Math.random()-1,this.y=2*Math.random()-1;return this.fillData(e,function(e){r[2*e+0]=Math.sin(n*t.y)-Math.cos(o*t.x),r[2*e+1]=Math.sin(i*t.x)-Math.cos(u*t.y),t.x=r[2*e+0],t.y=r[2*e+1]}),r},t}(i(r(2)).default);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),u=function(e){function t(){return e.call(this)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"Fractal Dream"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formula",{get:function(){return"x_{n+1} = sin(b*y_{n}) + c*sin(b*x_{n})\n        y_{n+1} = sin(a*x_{n}) + d*sin(a*y_{n})"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parameters",{get:function(){return["a = "+a.Parameters.a,"b = "+a.Parameters.b,"c = "+a.Parameters.c,"d = "+a.Parameters.d]},enumerable:!0,configurable:!0}),t.prototype.toggleParametersVisibility=function(){Controls.setVisibility(a.ControlsID.A,!0),Controls.setVisibility(a.ControlsID.B,!0),Controls.setVisibility(a.ControlsID.C,!0),Controls.setVisibility(a.ControlsID.D,!0)},t.prototype.computeXPoints=function(e){var t=this,r=new Float32Array(2*e),n=a.Parameters.a,o=a.Parameters.b,i=a.Parameters.c,u=a.Parameters.d;this.x=2*Math.random()-1,this.y=2*Math.random()-1;return this.fillData(e,function(e){r[2*e+0]=Math.sin(o*t.y)+i*Math.sin(o*t.x),r[2*e+1]=Math.sin(n*t.x)+u*Math.sin(n*t.y),t.x=r[2*e+0],t.y=r[2*e+1]}),r},t}(i(r(2)).default);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var u=i(r(18)),s=a(r(0)),l=r(0),c=a(r(7)),f=i(r(8)),d=i(r(5)),p=r(1);function h(e,t,r){var n=0,o=0,i=0;return(e=e%1*6)<1?(n=1,o=e):e<2?(n=2-e,o=1):e<3?(o=1,i=e-2):e<4?(o=4-e,i=1):e<5?(n=e-4,i=1):e<6&&(n=1,i=6-e),[n=r*(1-t*(1-n)),o=r*(1-t*(1-o)),i=r*(1-t*(1-i)),1]}var b=function(e){function t(){var t=e.call(this)||this;t.backgroundColor="red",t.foregroundColor="yellow",c.buildShader({fragmentFilename:"compose.frag",vertexFilename:"compose.vert",injected:{}},function(e){null!==e&&(t._compositionShader=e,t._compositionShader.a.aCorner.VBO=f.default.createQuad(l.gl,-1,-1,1,1))});return t._FBO=new u.default(l.gl,512,512),t._currentTextureSize=0,t.initializeTexture(512),t}return o(t,e),t.prototype.initialize=function(){var e,t=Canvas.getSize(),r=Math.min(t[0],t[1]),n=(e=r,Math.pow(2,Math.ceil(Math.log(e)*Math.LOG2E)));this._currentTextureSize!==n&&(this.initializeTexture(n),this._FBO.width=n,this._FBO.height=n),l.gl.clearColor(0,0,0,1),l.gl.enable(l.gl.BLEND),l.gl.blendFunc(l.gl.ONE,l.gl.ONE),l.gl.blendEquation(l.gl.FUNC_ADD),s.adjustSize(),this._FBO.bind([this._texture]),l.gl.clear(l.gl.COLOR_BUFFER_BIT),u.default.bindDefault(l.gl),l.gl.clear(l.gl.COLOR_BUFFER_BIT),this.updateColors()},t.prototype.bindTopLayer=function(){this._FBO.bind([this._texture])},t.prototype.compose=function(){this._compositionShader&&(u.default.bindDefault(l.gl),d.default.setFullCanvas(l.gl),l.gl.clear(l.gl.COLOR_BUFFER_BIT),this._compositionShader.u.uTexture.value=this._texture,this._compositionShader.u.uForegroundColor.value=this._foregroundRgb,this._compositionShader.u.uBackgroundColor.value=this._backgroundRgb,this._compositionShader.use(),this._compositionShader.bindUniformsAndAttributes(),l.gl.drawArrays(l.gl.TRIANGLE_STRIP,0,4))},t.prototype.updateColors=function(){function e(e){return Math.floor(255*e)}function t(t){return"rgb("+e(t[0])+","+e(t[1])+","+e(t[2])+")"}this._foregroundRgb=h(p.Parameters.foregroundHue,.8,1),this.foregroundColor=t(this._foregroundRgb),this._backgroundRgb=h(p.Parameters.backgroundHue,.2,.85),this.backgroundColor=t(this._backgroundRgb)},t.prototype.initializeTexture=function(e){this._texture&&(l.gl.deleteTexture(this._texture),this._texture=null);for(var t=new Array(4*e*e),r=0;r<t.length;++r)t[r]=127;var n=new Uint8Array(t);this._texture=l.gl.createTexture(),l.gl.bindTexture(l.gl.TEXTURE_2D,this._texture),l.gl.texImage2D(l.gl.TEXTURE_2D,0,l.gl.RGBA,e,e,0,l.gl.RGBA,l.gl.UNSIGNED_BYTE,n),l.gl.texParameteri(l.gl.TEXTURE_2D,l.gl.TEXTURE_MAG_FILTER,l.gl.LINEAR),l.gl.texParameteri(l.gl.TEXTURE_2D,l.gl.TEXTURE_MIN_FILTER,l.gl.LINEAR),l.gl.texParameteri(l.gl.TEXTURE_2D,l.gl.TEXTURE_WRAP_S,l.gl.REPEAT),l.gl.texParameteri(l.gl.TEXTURE_2D,l.gl.TEXTURE_WRAP_T,l.gl.REPEAT),l.gl.bindTexture(l.gl.TEXTURE_2D,null),this._currentTextureSize=e},t}(i(r(6)).default);t.default=b},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t,r,n){var o=e.call(this,t)||this;return o.id=t.createFramebuffer(),o.width=r,o.height=n,o}return o(t,e),t.bindDefault=function(e,t){void 0===t&&(t=null),e.bindFramebuffer(e.FRAMEBUFFER,null),null===t?e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight):e.viewport(t.left,t.lower,t.width,t.height)},t.prototype.bind=function(t,r){void 0===r&&(r=null);var n=e.prototype.gl.call(this);n.bindFramebuffer(n.FRAMEBUFFER,this.id),n.viewport(0,0,this.width,this.height);for(var o=0;o<t.length;++o)n.framebufferTexture2D(n.FRAMEBUFFER,n["COLOR_ATTACHMENT"+o],n.TEXTURE_2D,t[o],0);r&&(n.bindRenderbuffer(n.RENDERBUFFER,r),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,r))},t.prototype.freeGLResources=function(){e.prototype.gl.call(this).deleteFramebuffer(this.id),this.id=null},t}(i(r(4)).default);t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(r(0)),s=r(0),l=a(r(5)),c=function(e){function t(){var t=e.call(this)||this;return t.backgroundColor="black",t.foregroundColor="white",t}return o(t,e),t.prototype.initialize=function(){s.gl.clearColor(0,0,0,1),s.gl.enable(s.gl.BLEND),s.gl.blendFunc(s.gl.ONE,s.gl.ONE),s.gl.blendEquation(s.gl.FUNC_ADD),u.adjustSize(),l.default.setFullCanvas(s.gl),s.gl.clear(s.gl.COLOR_BUFFER_BIT)},t.prototype.bindTopLayer=function(){},t.prototype.compose=function(){},t.prototype.updateColors=function(){},t}(a(r(6)).default);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(r(0)),s=r(0),l=a(r(5)),c=function(e){function t(){var t=e.call(this)||this;return t.backgroundColor="white",t.foregroundColor="black",t}return o(t,e),t.prototype.initialize=function(){s.gl.clearColor(1,1,1,1),s.gl.enable(s.gl.BLEND),s.gl.blendFunc(s.gl.ONE,s.gl.ONE),s.gl.blendEquation(s.gl.FUNC_REVERSE_SUBTRACT),u.adjustSize(),l.default.setFullCanvas(s.gl),s.gl.clear(s.gl.COLOR_BUFFER_BIT)},t.prototype.bindTopLayer=function(){},t.prototype.compose=function(){},t.prototype.updateColors=function(){},t}(a(r(6)).default);t.default=c}]);
//# sourceMappingURL=main.min.js.map