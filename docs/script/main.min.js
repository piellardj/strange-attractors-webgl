!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=9)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=null;e.gl=n,e.initGL=function(t){function r(t){Demopage.setErrorMessage("webgl-support",t)}var i=Canvas.getCanvas();if(e.gl=n=i.getContext("webgl",t),null==n){if(e.gl=n=i.getContext("experimental-webgl",t),null==n)return r("Your browser or device does not seem to support WebGL."),!1;r("Your browser or device only supports experimental WebGL.\nThe simulation may not run as expected.")}return n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.BLEND),n.clearColor(0,0,0,1),!0},e.adjustSize=function(t){void 0===t&&(t=!1);var e=t?window.devicePixelRatio:1,r=Math.floor(n.canvas.clientWidth*e),i=Math.floor(n.canvas.clientHeight*e);n.canvas.width===r&&n.canvas.height===i||(n.canvas.width=r,n.canvas.height=i)}},function(t,e,r){"use strict";var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=n(r(3));e.attractorNames={DeJong:"de-jong",Bedhead:"bedhead",Clifford:"clifford",FractalDream:"fractal-dream"};var o={dark:"dark",light:"light",color:"color"};e.compositingNames=o;var a={ATTRACTOR:"attractor-picker-id",A:"a-range-id",B:"b-range-id",C:"c-range-id",D:"d-range-id",FORMULA:"formula-checkbox-id",INDICATORS:"indicators-checkbox-id",INTENSITY:"intensity-range-id",QUALITY:"quality-range-id",COMPOSITING:"compositing",FOREGROUND:"foreground-range-id",BACKGROUND:"background-range-id",DOWNLOAD_SIZE:"download-size",DOWNLOAD:"file-download-id"};function u(t){for(var e=0,r=t;e<r.length;e++){(0,r[e])()}}e.ControlsID=a;var s,l,c,f,d,p,h,b,_,g,m,y={clear:[]};function v(){m=T.computeNbPointsNeeded(Canvas.getSize())}function O(t){var e=t===o.color;Controls.setVisibility(a.FOREGROUND,e),Controls.setVisibility(a.BACKGROUND,e),b=t,u(y.clear)}var T=function(){function t(){}return Object.defineProperty(t,"attractor",{get:function(){return s},set:function(t){Picker.setValue(a.ATTRACTOR,t),s=t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"a",{get:function(){return l},enumerable:!0,configurable:!0}),Object.defineProperty(t,"b",{get:function(){return c},enumerable:!0,configurable:!0}),Object.defineProperty(t,"c",{get:function(){return f},enumerable:!0,configurable:!0}),Object.defineProperty(t,"d",{get:function(){return d},enumerable:!0,configurable:!0}),Object.defineProperty(t,"nbPointsNeeded",{get:function(){return m},enumerable:!0,configurable:!0}),Object.defineProperty(t,"quality",{get:function(){return h},enumerable:!0,configurable:!0}),Object.defineProperty(t,"compositing",{get:function(){return b},enumerable:!0,configurable:!0}),Object.defineProperty(t,"foregroundHue",{get:function(){return _},enumerable:!0,configurable:!0}),Object.defineProperty(t,"backgroundHue",{get:function(){return g},enumerable:!0,configurable:!0}),Object.defineProperty(t,"clearObservers",{get:function(){return y.clear},enumerable:!0,configurable:!0}),t.computeNbPointsNeeded=function(t){var e=Math.min(t[0],t[1]);return p/(256*h)*e*e},t}();e.Parameters=T,Picker.addObserver(a.ATTRACTOR,function(t){s=t,u(y.clear)}),Range.addObserver(a.A,function(t){l=t,u(y.clear)}),l=Range.getValue(a.A),Range.addObserver(a.B,function(t){c=t,u(y.clear)}),c=Range.getValue(a.B),Range.addObserver(a.C,function(t){f=t,u(y.clear)}),f=Range.getValue(a.C),Range.addObserver(a.D,function(t){d=t,u(y.clear)}),d=Range.getValue(a.D),Checkbox.addObserver(a.FORMULA,function(t){i.setVisibility(t)}),i.setVisibility(Checkbox.isChecked(a.FORMULA)),Range.addObserver(a.INTENSITY,function(t){var e=t<p;p=t,v(),e&&u(y.clear)}),p=Range.getValue(a.INTENSITY),Range.addObserver(a.QUALITY,function(t){h=1-254/255*t,v(),u(y.clear)}),h=1-254/255*Range.getValue(a.QUALITY),Tabs.addObserver(a.COMPOSITING,function(t){O(""+t[0])}),O(""+Tabs.getValues(a.COMPOSITING)),Range.addObserver(a.FOREGROUND,function(t){_=t,u(y.clear)}),_=Range.getValue(a.FOREGROUND),Range.addObserver(a.BACKGROUND,function(t){g=t,u(y.clear)}),g=Range.getValue(a.BACKGROUND),Checkbox.addObserver(a.INDICATORS,function(t){Canvas.setIndicatorsVisibility(t)}),Canvas.setIndicatorsVisibility(Checkbox.isChecked(a.INDICATORS)),Canvas.Observers.canvasResize.push(v),v()},function(t,e,r){"use strict";var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=n(r(7)),u=i(r(8)),s=n(r(3)),l=r(1),c=i(r(13)),f=null,d=null,p=function(){function t(){if(null===f&&a.buildShader({fragmentFilename:"points.frag",vertexFilename:"points.vert",injected:{}},function(t){null!==t&&(f=t)}),null===d){var t=new Float32Array(2);d=new u.default(o.gl,t,2,o.gl.FLOAT,!1)}this.boundaries=null}return t.prototype.drawXPoints=function(t){if(f){var e=this.computeXPoints(t);d.setData(e);var r=Canvas.getSize(),n=r[0]/r[1];f.a.aCoords.VBO=d;var i=l.Parameters.quality;f.u.uColor.value=[i,i,i,1],f.u.uCenter.value=this.boundaries.center;var a=.5+this.boundaries.maxDimension;return f.u.uScale.value=[2/a/Math.max(n,1),2/a*Math.min(n,1)],f.use(),f.bindUniformsAndAttributes(),o.gl.drawArrays(o.gl.POINTS,0,t),!0}return!1},t.prototype.reset=function(){this.toggleParametersVisibility(),s.setTitle(this.name),s.setFormula(this.formula),s.setParameters(this.parameters),this.boundaries=null},t.prototype.fillData=function(t,e){for(var r=0;r<100;++r)e(0);if(null===this.boundaries){this.boundaries=new c.default;for(r=0;r<t;++r)e(r),this.boundaries.includePoint(this.x,this.y)}else for(r=0;r<t;++r)e(r)},t}();e.default=p},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i,o="Nothing You Could Do",a=8,u=8,s=24,l=20,c=16,f="blue",d="red";(n=document.createElement("link")).href="https://fonts.googleapis.com/css?family="+o.replace(" ","+"),n.rel="stylesheet",document.head.appendChild(n),function(){var t=".infos {\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        line-height: 1em;\n        margin: "+a+"px;\n        text-align: left;\n        font-family: '"+o+"', cursive;\n        font-size: "+l+"px;\n    }\n    .infos sub {\n        font-size: "+c+"px;\n    }\n    .infos div {\n        padding: "+u+"px;\n    }\n    .infos .attractor-name {\n        display: inline-block;\n        font-size: "+s+"px;\n    }\n    .infos .attractor-parameters {\n        display: inline-block;\n    }",e=document.createElement("style");e.setAttribute("type","text/css"),e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),document.head.appendChild(e);var r=document.createElement("style");document.head.appendChild(r),i=r.sheet}(),g("white","black");var p=document.createElement("div");p.className="attractor-name";var h=document.createElement("div"),b=document.createElement("div");b.className="attractor-parameters";var _=document.createElement("div");function g(t,e){for(f=t,d=e;i.cssRules.length>0;)i.deleteRule(0);i.insertRule(".infos { color: "+f+"; }",0),i.insertRule(".infos div { background: "+d+"; }",0)}function m(t){_.style.display=t?"":"none"}_.className="infos",_.appendChild(p),_.appendChild(h),_.appendChild(b),m(!1),Canvas.getCanvas().parentElement.appendChild(_),e.setColors=g,e.setVisibility=m,e.setTitle=function(t){p.textContent=t},e.setFormula=function(t){function e(t,e){return e+t+e}function r(t,e){return"<"+e+">"+t+"</"+e+">"}var n=t.replace(/\s*\*\s*/g,e("&times","&#8239;"));n=(n=(n=(n=(n=(n=(n=(n=n.replace(/\s*\/\s*/g,e("&divide","&#8239;"))).replace(/\s*\+\s*/g,e("+"," "))).replace(/\s*-\s*/g,e("-"," "))).replace(/\s*=\s*/g,e("="," "))).replace(/\s*n\s*\+\s*1\s*/g,"n"+e("+","&#8239;")+"1")).replace(/\n/g,"<br/>")).replace(/_{([^}]*)}/g,function(t,e){return r(e,"sub")})).replace(/\^{([^}]*)}/g,function(t,e){return r(e,"sup")}),h.innerHTML=n},e.setParameters=function(t){b.innerHTML=t.join("<br/>")},e.drawToCanvas=function(t){function e(e){t.font=e+"px "+o}function r(e,r,n,i){var o=t.fillStyle;t.fillStyle=d,t.fillRect(e,r,n,i),t.fillStyle=o}r(a,a,p.clientWidth,p.clientHeight),t.fillStyle=f,t.textAlign="left",t.textBaseline="top";var n=a+u,i=a+u,_=s;e(_),t.fillText(p.textContent,n,i),i+=2*l,e(_=l),r(a,i-u,h.clientWidth,h.clientHeight),h.innerHTML.split(/\s*<br\/?>\s*/g).forEach(function(r){var o=0,a=0;function u(e){t.fillText(e,n+o,i),o+=t.measureText(e).width}function s(t){var e=r.indexOf(t,a);return e<0?r.length:e}for(;a<r.length;){var l=s("<sub>");u(r.substring(a,l)),a=l+5,l=s("</sub>"),i+=.4*_,e(c),u(r.substring(a,l)),i-=.4*_,a=l+6,e(_)}i+=1.25*_}),r(a,(i+=1*l)-u,b.clientWidth,b.clientHeight),b.innerHTML.split(/\s*<br\/?>\s*/g).forEach(function(e){t.fillText(e,n,i),i+=1*_})}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._gl=t}return t.prototype.gl=function(){return this._gl},t}();e.default=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,r,n){this.left=t,this.lower=e,this.width=r,this.height=n}return t.setFullCanvas=function(t){t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)},t.prototype.set=function(t){t.viewport(this.lower,this.left,this.width,this.height)},t}();e.default=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){return function(){}}();e.default=n},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=n(r(11)),u=i(r(12)),s={};function l(t,e){var r=2,n=0;function i(i){function s(e){return e.replace(/#INJECT\((.*)\)/gm,function(e,r){return t.injected[r]?t.injected[r]:e})}if(i||n++,0===--r){var l=null;if(0===n){var c=u.getSource(t.vertexFilename),f=u.getSource(t.fragmentFilename),d=s(c),p=s(f);l=new a.default(o.gl,d,p)}e(l)}}u.loadSource(t.vertexFilename,i),u.loadSource(t.fragmentFilename,i)}e.getShader=function(t){return s[t].shader},e.buildShader=l,e.registerShader=function(t,e,r){function n(t){for(var e=0,r=t.callbacks;e<r.length;e++)(0,r[e])(!t.failed,t.shader);t.callbacks=[]}if(void 0===s[t]){s[t]={callbacks:[r],failed:!1,infos:e,pending:!0,shader:null};var i=s[t];l(e,function(t){i.pending=!1,i.failed=null===t,i.shader=t,n(i)})}else{var o=s[t];!0===o.pending?o.callbacks.push(r):n(o)}},e.deleteShader=function(t){s[t]&&(s[t].shader&&s[t].shader.freeGLResources(),delete s[t])}},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a,u=o(r(4));!function(t){t[t.DYNAMIC=0]="DYNAMIC",t[t.STATIC=1]="STATIC"}(a||(a={}));var s=function(t){function e(e,r,n,i,o){void 0===o&&(o=!0);var u=t.call(this,e)||this;return u.id=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,u.id),o?e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW):e.bufferData(e.ARRAY_BUFFER,r,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),u.size=n,u.type=i,u.normalize=!1,u.stride=0,u.offset=0,u.usage=o?a.STATIC:a.DYNAMIC,u}return i(e,t),e.createQuad=function(t,r,n,i,o){return new e(t,new Float32Array([r,n,i,n,r,o,i,o]),2,t.FLOAT,!0)},e.prototype.freeGLResources=function(){this.gl().deleteBuffer(this.id),this.id=null},e.prototype.bind=function(e){var r=t.prototype.gl.call(this);r.enableVertexAttribArray(e),r.bindBuffer(r.ARRAY_BUFFER,this.id),r.vertexAttribPointer(e,this.size,this.type,this.normalize,this.stride,this.offset)},e.prototype.setData=function(e){var r=t.prototype.gl.call(this);r.bindBuffer(r.ARRAY_BUFFER,this.id),this.usage===a.STATIC?r.bufferData(r.ARRAY_BUFFER,e,r.STATIC_DRAW):r.bufferData(r.ARRAY_BUFFER,e,r.DYNAMIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null)},e}(u.default);e.default=s},function(t,e,r){"use strict";var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(r(0)),a=r(0),u=i(r(10)),s=i(r(14)),l=i(r(15)),c=i(r(16)),f=n(r(3)),d=r(1),p=i(r(17)),h=i(r(19)),b=i(r(20));!function(){o.initGL({alpha:!1,depth:!1,preserveDrawingBuffer:!0});var t=!0;Canvas.Observers.canvasResize.push(function(){return t=!0}),d.Parameters.clearObservers.push(function(){return t=!0}),d.Parameters.attractor=d.attractorNames.DeJong;var e={};e[d.attractorNames.Bedhead]=new u.default,e[d.attractorNames.Clifford]=new s.default,e[d.attractorNames.DeJong]=new l.default,e[d.attractorNames.FractalDream]=new c.default;var r,n={};function i(t){r=t,Canvas.setIndicatorText("points-drawn",r.toLocaleString())}n[d.compositingNames.color]=new p.default,n[d.compositingNames.dark]=new h.default,n[d.compositingNames.light]=new b.default,i(0);var _,g,m=Math.pow(2,16);FileControl.addDownloadObserver(d.ControlsID.DOWNLOAD,function(){var e=+Tabs.getValues(d.ControlsID.DOWNLOAD_SIZE)[0],r=d.Parameters.computeNbPointsNeeded([e,e]),n=document.createElement("canvas"),i=n.getContext("2d");n.width=e+400,n.height=e;var o=Canvas.getCanvas();Canvas.showLoader(!0),o.style.position="absolute",o.style.width=e+"px",o.style.height=e+"px",o.width=e,o.height=e,g.initialize();var u=0,s=Math.pow(2,18);for(g.bindTopLayer();u<r;)u+=s,_.drawXPoints(s);if(g.compose(),i.fillStyle=g.backgroundColor,i.fillRect(0,0,n.width,n.height),i.drawImage(a.gl.canvas,.5*(n.width-e),0,e,e),o.style.position="",o.style.width="",o.style.height="",Canvas.showLoader(!1),Canvas.setLoaderText(""),t=!0,f.drawToCanvas(i),n.msToBlob){var l=n.msToBlob();window.navigator.msSaveBlob(l,"image.png")}else n.toBlob(function(t){var e=document.createElement("a");e.download="image.png",e.href=URL.createObjectURL(t),e.click()})}),requestAnimationFrame(function o(){t&&(t=!1,i(0),(_=e[d.Parameters.attractor]).reset(),(g=n[d.Parameters.compositing]).initialize(),f.setColors(g.foregroundColor,g.backgroundColor)),r<d.Parameters.nbPointsNeeded&&(g.bindTopLayer(),_.drawXPoints(m)&&(i(r+m),g.compose())),requestAnimationFrame(o)})}()},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),u=function(t){function e(){return t.call(this)||this}return i(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"Bedhead"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formula",{get:function(){return"x_{n+1} = sin(x_{n}*y_{n}/b) + cos(a*x_{n} - y_{n})\n        y_{n+1} = x_{n} + sin(y_{n})/b"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parameters",{get:function(){return["a = "+a.Parameters.a,"b = "+a.Parameters.b]},enumerable:!0,configurable:!0}),e.prototype.toggleParametersVisibility=function(){Controls.setVisibility(a.ControlsID.A,!0),Controls.setVisibility(a.ControlsID.B,!0),Controls.setVisibility(a.ControlsID.C,!1),Controls.setVisibility(a.ControlsID.D,!1)},e.prototype.computeXPoints=function(t){var e=this,r=new Float32Array(2*t),n=a.Parameters.a,i=a.Parameters.b;this.x=2*Math.random()-1,this.y=2*Math.random()-1;return this.fillData(t,function(t){r[2*t+0]=Math.sin(e.x*e.y/i)+Math.cos(n*e.x-e.y),r[2*t+1]=e.x+Math.sin(e.y)/i,e.x=r[2*t+0],e.y=r[2*t+1]}),r},e}(o(r(2)).default);e.default=u},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(r(4));function u(t,e,r){alert("NOT IMPLEMENTED YET")}var s={35664:{str:"FLOAT_VEC2",binder:function(t,e,r){t.uniform2fv(e,r)}},35665:{str:"FLOAT_VEC3",binder:function(t,e,r){t.uniform3fv(e,r)}},35666:{str:"FLOAT_VEC4",binder:function(t,e,r){t.uniform4fv(e,r)}},35667:{str:"INT_VEC2",binder:function(t,e,r){t.uniform2iv(e,r)}},35668:{str:"INT_VEC3",binder:function(t,e,r){t.uniform3iv(e,r)}},35669:{str:"INT_VEC4",binder:function(t,e,r){t.uniform4iv(e,r)}},35670:{str:"BOOL",binder:function(t,e,r){t.uniform1i(e,+r)}},35671:{str:"BOOL_VEC2",binder:function(t,e,r){t.uniform2iv(e,r)}},35672:{str:"BOOL_VEC3",binder:function(t,e,r){t.uniform3iv(e,r)}},35673:{str:"BOOL_VEC4",binder:function(t,e,r){t.uniform4iv(e,r)}},35674:{str:"FLOAT_MAT2",binder:function(t,e,r){t.uniformMatrix2fv(e,!1,r)}},35675:{str:"FLOAT_MAT3",binder:function(t,e,r){t.uniformMatrix3fv(e,!1,r)}},35676:{str:"FLOAT_MAT4",binder:function(t,e,r){t.uniformMatrix4fv(e,!1,r)}},35678:{str:"SAMPLER_2D",binder:function(t,e,r,n){t.uniform1i(e,r),t.activeTexture(t["TEXTURE"+r]),t.bindTexture(t.TEXTURE_2D,n)}},35680:{str:"SAMPLER_CUBE",binder:function(t,e,r,n){t.uniform1i(e,r),t.activeTexture(t["TEXTURE"+r]),t.bindTexture(t.TEXTURE_CUBE_MAP,n)}},5120:{str:"BYTE",binder:u},5121:{str:"UNSIGNED_BYTE",binder:u},5122:{str:"SHORT",binder:u},5123:{str:"UNSIGNED_SHORT",binder:u},5124:{str:"INT",binder:function(t,e,r){Array.isArray(r),t.uniform1iv(e,r)}},5125:{str:"UNSIGNED_INT",binder:u},5126:{str:"FLOAT",binder:function(t,e,r){Array.isArray(r)?t.uniform1fv(e,r):t.uniform1f(e,r)}}},l=function(t){function e(e,r,n){var i=this;function o(t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)?n:(console.error(e.getShaderInfoLog(n)),e.deleteShader(n),null)}(i=t.call(this,e)||this).id=null,i.uCount=0,i.aCount=0;var a=o(e.VERTEX_SHADER,r),u=o(e.FRAGMENT_SHADER,n),s=e.createProgram();return e.attachShader(s,a),e.attachShader(s,u),e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)?(i.id=s,i.introspection()):(console.error(e.getProgramInfoLog(s)),e.deleteProgram(s)),i}return i(e,t),e.prototype.freeGLResources=function(){t.prototype.gl.call(this).deleteProgram(this.id),this.id=null},e.prototype.use=function(){t.prototype.gl.call(this).useProgram(this.id)},e.prototype.bindUniforms=function(){var e=this,r=t.prototype.gl.call(this),n=0;Object.keys(this.u).forEach(function(t){var i=e.u[t];if(null!==i.value)if(35678===i.type||35680===i.type){var o=n;s[i.type].binder(r,i.loc,o,i.value),n++}else s[i.type].binder(r,i.loc,i.value)})},e.prototype.bindAttributes=function(){var t=this;Object.keys(this.a).forEach(function(e){var r=t.a[e];null!==r.VBO&&r.VBO.bind(r.loc)})},e.prototype.bindUniformsAndAttributes=function(){this.bindUniforms(),this.bindAttributes()},e.prototype.introspection=function(){var e=t.prototype.gl.call(this);this.uCount=e.getProgramParameter(this.id,e.ACTIVE_UNIFORMS),this.u=[];for(var r=0;r<this.uCount;++r){var n=e.getActiveUniform(this.id,r),i=n.name;this.u[i]={loc:e.getUniformLocation(this.id,i),size:n.size,type:n.type,value:null}}this.aCount=e.getProgramParameter(this.id,e.ACTIVE_ATTRIBUTES),this.a=[];for(r=0;r<this.aCount;++r){var o=e.getActiveAttrib(this.id,r),a=o.name;this.a[a]={VBO:null,loc:e.getAttribLocation(this.id,a),size:o.size,type:o.type}}},e}(a.default);e.default=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};e.loadSource=function(t,e){function r(t){for(var e=0,r=t.callbacks;e<r.length;e++)(0,r[e])(!t.failed);t.callbacks=[]}if(void 0===n[t]){n[t]={callbacks:[e],failed:!1,pending:!0,text:null};var i=n[t],o=new XMLHttpRequest;o.open("GET","./shaders/"+t,!0),o.onload=function(){4===o.readyState&&(i.pending=!1,200===o.status?(i.text=o.responseText,i.failed=!1):(console.error("Cannot load '"+t+"' shader source: "+o.statusText),i.failed=!0),r(i))},o.onerror=function(){console.error("Cannot load '"+t+"' shader source: "+o.statusText),i.pending=!1,i.failed=!0,r(i)},o.send(null)}else{var a=n[t];!0===a.pending?a.callbacks.push(e):(a.callbacks=[e],r(a))}},e.getSource=function(t){return n[t].text}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.minX=0,this.maxX=0,this.minY=0,this.maxY=0}return Object.defineProperty(t.prototype,"center",{get:function(){return[.5*(this.maxX+this.minX),.5*(this.maxY+this.minY)]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxDimension",{get:function(){return Math.max(this.maxX-this.minX,this.maxY-this.minY)},enumerable:!0,configurable:!0}),t.prototype.includePoint=function(t,e){this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,e),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,e)},t}();e.default=n},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),u=function(t){function e(){return t.call(this)||this}return i(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"Clifford"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formula",{get:function(){return"x_{n+1} = sin(a*y_{n}) + c*cos(a*x_{n})\n        y_{n+1} = sin(c*x_{n}) + d*cos(b*y_{n})"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parameters",{get:function(){return["a = "+a.Parameters.a,"b = "+a.Parameters.b,"c = "+a.Parameters.c,"d = "+a.Parameters.d]},enumerable:!0,configurable:!0}),e.prototype.toggleParametersVisibility=function(){Controls.setVisibility(a.ControlsID.A,!0),Controls.setVisibility(a.ControlsID.B,!0),Controls.setVisibility(a.ControlsID.C,!0),Controls.setVisibility(a.ControlsID.D,!0)},e.prototype.computeXPoints=function(t){var e=this,r=new Float32Array(2*t),n=a.Parameters.a,i=a.Parameters.b,o=a.Parameters.c,u=a.Parameters.d;this.x=2*Math.random()-1,this.y=2*Math.random()-1;return this.fillData(t,function(t){r[2*t+0]=Math.sin(n*e.y)+o*Math.cos(n*e.x),r[2*t+1]=Math.sin(o*e.x)+u*Math.cos(i*e.y),e.x=r[2*t+0],e.y=r[2*t+1]}),r},e}(o(r(2)).default);e.default=u},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),u=function(t){function e(){return t.call(this)||this}return i(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"De Jong"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formula",{get:function(){return"x_{n+1} = sin(a*y_{n}) - cos(b*x_{n})\n        y_{n+1} = sin(c*x_{n}) - cos(d*y_{n})"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parameters",{get:function(){return["a = "+a.Parameters.a,"b = "+a.Parameters.b,"c = "+a.Parameters.c,"d = "+a.Parameters.d]},enumerable:!0,configurable:!0}),e.prototype.toggleParametersVisibility=function(){Controls.setVisibility(a.ControlsID.A,!0),Controls.setVisibility(a.ControlsID.B,!0),Controls.setVisibility(a.ControlsID.C,!0),Controls.setVisibility(a.ControlsID.D,!0)},e.prototype.computeXPoints=function(t){var e=this,r=new Float32Array(2*t),n=a.Parameters.a,i=a.Parameters.b,o=a.Parameters.c,u=a.Parameters.d;this.x=2*Math.random()-1,this.y=2*Math.random()-1;return this.fillData(t,function(t){r[2*t+0]=Math.sin(n*e.y)-Math.cos(i*e.x),r[2*t+1]=Math.sin(o*e.x)-Math.cos(u*e.y),e.x=r[2*t+0],e.y=r[2*t+1]}),r},e}(o(r(2)).default);e.default=u},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),u=function(t){function e(){return t.call(this)||this}return i(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"Fractal Dream"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formula",{get:function(){return"x_{n+1} = sin(b*y_{n}) + c*sin(b*x_{n})\n        y_{n+1} = sin(a*x_{n}) + d*sin(a*y_{n})"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parameters",{get:function(){return["a = "+a.Parameters.a,"b = "+a.Parameters.b,"c = "+a.Parameters.c,"d = "+a.Parameters.d]},enumerable:!0,configurable:!0}),e.prototype.toggleParametersVisibility=function(){Controls.setVisibility(a.ControlsID.A,!0),Controls.setVisibility(a.ControlsID.B,!0),Controls.setVisibility(a.ControlsID.C,!0),Controls.setVisibility(a.ControlsID.D,!0)},e.prototype.computeXPoints=function(t){var e=this,r=new Float32Array(2*t),n=a.Parameters.a,i=a.Parameters.b,o=a.Parameters.c,u=a.Parameters.d;this.x=2*Math.random()-1,this.y=2*Math.random()-1;return this.fillData(t,function(t){r[2*t+0]=Math.sin(i*e.y)+o*Math.sin(i*e.x),r[2*t+1]=Math.sin(n*e.x)+u*Math.sin(n*e.y),e.x=r[2*t+0],e.y=r[2*t+1]}),r},e}(o(r(2)).default);e.default=u},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var u=o(r(18)),s=a(r(0)),l=r(0),c=a(r(7)),f=o(r(8)),d=o(r(5)),p=r(1);function h(t,e,r){var n=0,i=0,o=0;return(t=t%1*6)<1?(n=1,i=t):t<2?(n=2-t,i=1):t<3?(i=1,o=t-2):t<4?(i=4-t,o=1):t<5?(n=t-4,o=1):t<6&&(n=1,o=6-t),[n=r*(1-e*(1-n)),i=r*(1-e*(1-i)),o=r*(1-e*(1-o)),1]}var b=function(t){function e(){var e=t.call(this)||this;e.backgroundColor="red",e.foregroundColor="yellow",c.buildShader({fragmentFilename:"compose.frag",vertexFilename:"compose.vert",injected:{}},function(t){null!==t&&(e._compositionShader=t,e._compositionShader.a.aCorner.VBO=f.default.createQuad(l.gl,-1,-1,1,1))});return e._FBO=new u.default(l.gl,512,512),e._currentTextureSize=0,e.initializeTexture(512),e}return i(e,t),e.prototype.initialize=function(){var t,e=Canvas.getSize(),r=Math.min(e[0],e[1]),n=(t=r,Math.pow(2,Math.ceil(Math.log(t)*Math.LOG2E)));console.log("min "+r+" ; "+n),this._currentTextureSize!==n&&(this.initializeTexture(n),this._FBO.width=n,this._FBO.height=n),l.gl.clearColor(0,0,0,1),l.gl.enable(l.gl.BLEND),l.gl.blendFunc(l.gl.ONE,l.gl.ONE),l.gl.blendEquation(l.gl.FUNC_ADD),s.adjustSize(),this._FBO.bind([this._texture]),l.gl.clear(l.gl.COLOR_BUFFER_BIT),u.default.bindDefault(l.gl),l.gl.clear(l.gl.COLOR_BUFFER_BIT),this.updateColors()},e.prototype.bindTopLayer=function(){this._FBO.bind([this._texture])},e.prototype.compose=function(){this._compositionShader&&(u.default.bindDefault(l.gl),d.default.setFullCanvas(l.gl),l.gl.clear(l.gl.COLOR_BUFFER_BIT),this._compositionShader.u.uTexture.value=this._texture,this._compositionShader.u.uForegroundColor.value=this._foregroundRgb,this._compositionShader.u.uBackgroundColor.value=this._backgroundRgb,this._compositionShader.use(),this._compositionShader.bindUniformsAndAttributes(),l.gl.drawArrays(l.gl.TRIANGLE_STRIP,0,4))},e.prototype.initializeTexture=function(t){this._texture&&(l.gl.deleteTexture(this._texture),this._texture=null);for(var e=new Array(4*t*t),r=0;r<e.length;++r)e[r]=127;var n=new Uint8Array(e);this._texture=l.gl.createTexture(),l.gl.bindTexture(l.gl.TEXTURE_2D,this._texture),l.gl.texImage2D(l.gl.TEXTURE_2D,0,l.gl.RGBA,t,t,0,l.gl.RGBA,l.gl.UNSIGNED_BYTE,n),l.gl.texParameteri(l.gl.TEXTURE_2D,l.gl.TEXTURE_MAG_FILTER,l.gl.LINEAR),l.gl.texParameteri(l.gl.TEXTURE_2D,l.gl.TEXTURE_MIN_FILTER,l.gl.LINEAR),l.gl.texParameteri(l.gl.TEXTURE_2D,l.gl.TEXTURE_WRAP_S,l.gl.REPEAT),l.gl.texParameteri(l.gl.TEXTURE_2D,l.gl.TEXTURE_WRAP_T,l.gl.REPEAT),l.gl.bindTexture(l.gl.TEXTURE_2D,null),this._currentTextureSize=t},e.prototype.updateColors=function(){function t(t){return Math.floor(255*t)}function e(e){return"rgb("+t(e[0])+","+t(e[1])+","+t(e[2])+")"}this._foregroundRgb=h(p.Parameters.foregroundHue,.8,1),this.foregroundColor=e(this._foregroundRgb),this._backgroundRgb=h(p.Parameters.backgroundHue,.2,.85),this.backgroundColor=e(this._backgroundRgb)},e}(o(r(6)).default);e.default=b},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.id=e.createFramebuffer(),i.width=r,i.height=n,i}return i(e,t),e.bindDefault=function(t,e){void 0===e&&(e=null),t.bindFramebuffer(t.FRAMEBUFFER,null),null===e?t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight):t.viewport(e.left,e.lower,e.width,e.height)},e.prototype.bind=function(e,r){void 0===r&&(r=null);var n=t.prototype.gl.call(this);n.bindFramebuffer(n.FRAMEBUFFER,this.id),n.viewport(0,0,this.width,this.height);for(var i=0;i<e.length;++i)n.framebufferTexture2D(n.FRAMEBUFFER,n["COLOR_ATTACHMENT"+i],n.TEXTURE_2D,e[i],0);r&&(n.bindRenderbuffer(n.RENDERBUFFER,r),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,r))},e.prototype.freeGLResources=function(){t.prototype.gl.call(this).deleteFramebuffer(this.id),this.id=null},e}(o(r(4)).default);e.default=a},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=o(r(0)),s=r(0),l=a(r(5)),c=function(t){function e(){var e=t.call(this)||this;return e.backgroundColor="black",e.foregroundColor="white",e}return i(e,t),e.prototype.initialize=function(){s.gl.clearColor(0,0,0,1),s.gl.enable(s.gl.BLEND),s.gl.blendFunc(s.gl.ONE,s.gl.ONE),s.gl.blendEquation(s.gl.FUNC_ADD),u.adjustSize(),l.default.setFullCanvas(s.gl),s.gl.clear(s.gl.COLOR_BUFFER_BIT)},e.prototype.bindTopLayer=function(){},e.prototype.compose=function(){},e}(a(r(6)).default);e.default=c},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=o(r(0)),s=r(0),l=a(r(5)),c=function(t){function e(){var e=t.call(this)||this;return e.backgroundColor="white",e.foregroundColor="black",e}return i(e,t),e.prototype.initialize=function(){s.gl.clearColor(1,1,1,1),s.gl.enable(s.gl.BLEND),s.gl.blendFunc(s.gl.ONE,s.gl.ONE),s.gl.blendEquation(s.gl.FUNC_REVERSE_SUBTRACT),u.adjustSize(),l.default.setFullCanvas(s.gl),s.gl.clear(s.gl.COLOR_BUFFER_BIT)},e.prototype.bindTopLayer=function(){},e.prototype.compose=function(){},e}(a(r(6)).default);e.default=c}]);
//# sourceMappingURL=main.min.js.map